<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">
<title>Launching VRChat...</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noreferrer, noopener">
<meta name="referrer" content="no-referrer" />

<link rel="preconnect" href="https://cdn.jsdelivr.net">
<link rel="preconnect" href="https://cdnjs.cloudflare.com">
<!--
rel="preload" means the resource is critical for render properly
<link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous">
<link rel="preload" as="script" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/js/all.min.js" crossorigin="anonymous">
<link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css" crossorigin="anonymous">
<link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/svg-with-js.min.css" crossorigin="anonymous">
-->

<!-- <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMjAgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgRnJlZSA2LjUuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZS9mcmVlIChJY29uczogQ0MgQlkgNC4wLCBGb250czogU0lMIE9GTCAxLjEsIENvZGU6IE1JVCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMyBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggaWQ9InNldmVuIiBkPSJNMCA2NEMwIDQ2LjMgMTQuMyAzMiAzMiAzMkgyODhjMTEuNSAwIDIyIDYuMSAyNy43IDE2LjFzNS43IDIyLjItLjEgMzIuMWwtMjI0IDM4NGMtOC45IDE1LjMtMjguNSAyMC40LTQzLjggMTEuNXMtMjAuNC0yOC41LTExLjUtNDMuOEwyMzIuMyA5NkgzMkMxNC4zIDk2IDAgODEuNyAwIDY0eiIvPjx1c2UgZmlsbD0iIzAwMCIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjEyLjUlIiBocmVmPSIjc2V2ZW4iLz4KPHVzZSBmaWxsPSIjMDAwIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMCIgaHJlZj0iI3NldmVuIi8+PC9zdmc+" sizes="any"> -->

<meta name="theme-color" content="#fafafa">

</head>

<style>

html, body
{
  font-language-override: "ENG";
  -webkit-locale: "en";
  line-break: strict;
  word-break: break-word;
  overflow-wrap: break-word;
  /* word-wrap: break-word; */
}

</style>

<body>

<section class="my-4">
  <div class="container">
    <header class="py-2">
      <h1 class="display-3">
        <div>Launching...</div>
        <!--
        <div class="visually-hidden"> | </div>
        <div class="text-secondary" style="--bs-text-opacity: .75; font-size: 60%;">7 WONDERS</div>
        -->
      </h1>
    </header>
  </div>
</section>

<section class="my-4">
  <div class="container">
    <h3 class="display-6 my-2" id="launching-title">
      <span class="visually-hidden">Buttons of </span>
      <span class="text-secondary" style="font-size: .6em;">Launching VRChat...</span>
    </h3>
    <div class="text-muted small fw-light my-2">These buttons do <strong>NOT</strong> open to new tabs.</div>
    <div class="d-flex flex-column flex-sm-row flex-sm-wrap justify-content-start align-items-stretch gap-2 my-2">
      <a href="#" class="btn btn-primary btn-lg shadow-sm disabled" tabindex="-1" role="button" aria-disabled="true" id="game-button"><!-- <i class="fa-solid fa-window-maximize"></i> --><span class="vrchat-icon" class="fa-lg text-muted"></span> Launch Game</a>
      <a href="#" class="btn btn-outline-primary btn-lg shadow-sm disabled" style="--bs-btn-bg: #fff;" tabindex="-1" role="button" aria-disabled="true" id="web-button" referrerpolicy="no-referrer" rel="nofollow noreferrer noopener"><i class="fa-solid fa-globe"></i> Launch Web</a>
      <a href="#" class="btn btn-info btn-lg shadow-sm disabled" tabindex="-1" role="button" aria-disabled="true" id="info-button" referrerpolicy="no-referrer" rel="nofollow noreferrer noopener"><i class="fa-solid fa-circle-info"></i> Info</a>
      <div class="btn-group" id="copy-button-group">
        <button type="button" class="btn btn-outline-success btn-lg shadow-sm dropdown-toggle" style="--bs-btn-bg: #fff;" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fa-solid fa-copy"></i> Copy
        </button>
        <ul class="dropdown-menu">
          <li><div class="dropdown-header">Copy Link of...</div></li>
          <li>
            <button type="button" class="dropdown-item py-2 copy-button" style="--bs-dropdown-link-color: var(--bs-primary); --bs-dropdown-link-hover-color: var(--bs-primary-text-emphasis); --bs-dropdown-link-active-bg: var(--bs-primary-text-emphasis)" data-copy-target="#game-link-input" data-tooltip-target="#copy-button-group">
              <!-- <i class="fa-solid fa-window-maximize fa-fw"></i> --><span class="vrchat-icon" class="fa-lg text-muted"></span> Launch Game
            </button>
          </li>
          <li>
            <button type="button" class="dropdown-item py-2 copy-button" style="--bs-dropdown-link-color: rgba(var(--bs-primary-rgb),var(--bs-text-opacity)); --bs-text-opacity: 0.8; --bs-dropdown-link-hover-color: var(--bs-primary-text-emphasis); --bs-dropdown-link-active-bg: var(--bs-primary-text-emphasis)" data-copy-target="#web-link-input" data-tooltip-target="#copy-button-group">
              <i class="fa-solid fa-globe fa-fw"></i> Launch Web
            </button>
          </li>
          <li>
            <button type="button" class="dropdown-item py-2 copy-button" style="--bs-dropdown-link-color: var(--bs-info); --bs-dropdown-link-hover-color: var(--bs-info-text-emphasis); --bs-dropdown-link-active-bg: var(--bs-info-text-emphasis)" data-copy-target="#info-link-input" data-tooltip-target="#copy-button-group">
              <i class="fa-solid fa-circle-info fa-fw"></i> Information
            </button>
          </li>
          <!--
          <li><hr class="dropdown-divider"></li>
          <li><div class="dropdown-header">Other Links</div></li>
          <li>
            <button type="button" class="dropdown-item py-2 copy-button" style="--bs-dropdown-link-color: var(--bs-secondary); --bs-dropdown-link-hover-color: var(--bs-secondary-text-emphasis); --bs-dropdown-link-active-bg: var(--bs-secondary-text-emphasis)" data-copy-target="#launch-public-input" data-tooltip-target="#copy-button-group">
              <i class="fa-solid fa-users-viewfinder fa-fw"></i> Launch Public
            </button>
          </li>
          -->
          <li>
            <button type="button" class="dropdown-item py-2 copy-button" style="--bs-dropdown-link-color: var(--bs-secondary); --bs-dropdown-link-hover-color: var(--bs-secondary-text-emphasis); --bs-dropdown-link-active-bg: var(--bs-secondary-text-emphasis)" data-copy-target="#this-link-input" data-tooltip-target="#copy-button-group">
              <i class="fa-regular fa-square-full"></i> Living Config
            </button>
          </li>
          <li>
            <button type="button" class="dropdown-item py-2 copy-button" style="--bs-dropdown-link-color: var(--bs-success); --bs-dropdown-link-hover-color: var(--bs-success-text-emphasis); --bs-dropdown-link-active-bg: var(--bs-success-text-emphasis)" data-copy-target="#this-sharable-input" data-tooltip-target="#copy-button-group">
              <i class="fa-regular fa-share-from-square"></i> Shareable Config
            </button>
          </li>
          <!--
          <li>
            <button type="button" class="dropdown-item py-2 copy-button" style="--bs-dropdown-link-color: var(--bs-secondary); --bs-dropdown-link-hover-color: var(--bs-secondary-text-emphasis); --bs-dropdown-link-active-bg: var(--bs-secondary-text-emphasis)" data-copy-target="#this-public-input" data-tooltip-target="#copy-button-group">
              <i class="fa-solid fa-users-gear fa-fw"></i> Publicize Current
            </button>
          </li>
          -->
        </ul>
      </div>
    </div>
    <div id="error-messages-container"></div>
    <div class="mt-5 mb-2">
      <form class="border shadow-lg bg-white" style="--bs-bg-opacity: .8;">
        <input type="hidden" id="game-link-input">
        <input type="hidden" id="web-link-input">
        <input type="hidden" id="info-link-input">
        <input type="hidden" id="launch-public-input">
        <input type="hidden" id="this-link-input">
        <input type="hidden" id="this-sharable-input">
        <input type="hidden" id="this-public-input">
        <nav>
          <div class="nav nav-tabs px-2 pt-2 flex-nowrap overflow-x-auto overflow-y-hidden" id="nav-tab" role="tablist">
            <button class="nav-link text-nowrap active" id="nav-debug-tab" data-bs-toggle="tab" data-bs-target="#nav-debug" type="button" role="tab" aria-controls="nav-debug" aria-selected="true"><i class="fa-solid fa-cookie-bite"></i> Debug</button>
            <button class="nav-link text-nowrap" id="nav-manual-tab" data-bs-toggle="tab" data-bs-target="#nav-manual" type="button" role="tab" aria-controls="nav-manual" aria-selected="false"><i class="fa-solid fa-gear"></i> Config</button>
            <button class="nav-link text-nowrap" id="nav-world-tab" data-bs-toggle="tab" data-bs-target="#nav-world" type="button" role="tab" aria-controls="nav-world" aria-selected="false"><i class="fa-solid fa-globe"></i> World</button>
            <button class="nav-link text-nowrap" id="nav-discord-tab" data-bs-toggle="tab" data-bs-target="#nav-discord" type="button" role="tab" aria-controls="nav-discord" aria-selected="false"><i class="fa-brands fa-discord"></i> Discord</button>
            <button class="nav-link text-nowrap" id="nav-twitter-tab" data-bs-toggle="tab" data-bs-target="#nav-twitter" type="button" role="tab" aria-controls="nav-twitter" aria-selected="false"><i class="fa-brands fa-twitter"></i> Twitter</button>
          </div>
        </nav>
        <div class="tab-content m-2" id="nav-tabContent">
          <div class="tab-pane fade show active" id="nav-debug" role="tabpanel" aria-labelledby="nav-debug-tab" tabindex="0">
            <div class="row debug-info">
              <label for="worldid-box" class="col-sm-4 col-form-label debug-info-title py-0">World ID</label>
              <div class="col-sm-8">
                <input type="text" id="worldid-box" readonly class="form-control-plaintext debug-info-text py-0">
              </div>
            </div>
            <div class="row debug-info">
              <label for="instancenumber-box" class="col-sm-4 col-form-label debug-info-title py-0">Instance Number <span id="instancenumber-text" class="text-body fst-italic"></span></label>
              <div class="col-sm-8">
                <input type="text" id="instancenumber-box" readonly class="form-control-plaintext debug-info-text py-0">
              </div>
            </div>
            <div class="row debug-info">
              <label for="instancetype-box" class="col-sm-4 col-form-label debug-info-title py-0">Instance Type</label>
              <div class="col-sm-8">
                <input type="text" id="instancetype-box" readonly class="form-control-plaintext debug-info-text py-0">
              </div>
            </div>
            <div class="row debug-info">
              <label for="instanceid-box" class="col-sm-4 col-form-label debug-info-title py-0">Instance Owner</label>
              <div class="col-sm-8">
                <input type="text" id="instanceid-box" readonly class="form-control-plaintext debug-info-text py-0">
              </div>
            </div>
            <div class="row debug-info">
              <label for="region-box" class="col-sm-4 col-form-label debug-info-title py-0">Region</label>
              <div class="col-sm-8">
                <input type="text" id="region-box" readonly class="form-control-plaintext debug-info-text py-0">
              </div>
            </div>
            <div class="row debug-info">
              <label for="nonce-box" class="col-sm-4 col-form-label debug-info-title py-0"><span class="fst-italic">NONCE</span> <span id="nonce-text" class="text-body fst-italic"></span></label>
              <div class="col-sm-8">
                <input type="text" id="nonce-box" readonly class="form-control-plaintext debug-info-text py-0">
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="nav-manual" role="tabpanel" aria-labelledby="nav-manual-tab" tabindex="0">
            <div class="row mb-2 manual-input align-items-center">
              <label for="parser-input-main" class="col-sm-4 col-form-label manual-input-title py-0">URL Parser</label>
              <div class="col-sm-8">
                <div class="input-group input-group-lg">
                  <input type="text" id="parser-input-main" class="form-control form-control-lg manual-input-text py-0 parser-input" placeholder="" aria-label="Paste Text to Parser" aria-describedby="parser-paste-button">
                  <button class="btn btn-outline-secondary paste-button disabled" data-paste-target="#parser-input-main" type="button" id="parser-paste-button" tabindex="-1" aria-disabled="true"><i class="fa-solid fa-paste"></i> <span class="d-none d-md-inline">Paste</span></button>
                </div>
              </div>
            </div>
            <div class="row mb-2">
              <div class="offset-sm-4 col-sm-8">
                <div class="form-check form-switch">
                  <input class="form-check-input force-regenerate-randoms" type="checkbox" role="switch" id="force-regenerate-randoms-1">
                  <label class="form-check-label" for="force-regenerate-randoms-1" style="user-select: none;">Force regenerate randoms.</label>
                </div>
              </div>
            </div>
            <div class="row mb-2 manual-input align-items-center">
              <label for="worldid-input" class="col-sm-4 col-form-label manual-input-title py-0">World ID</label>
              <div class="col-sm-8">
                <div class="input-group input-group-lg">
                  <input type="text" id="worldid-input" class="form-control form-control-lg manual-input-text py-0" placeholder="" aria-label="Paste Text to World ID" aria-describedby="worldid-paste-button">
                  <button class="btn btn-outline-secondary paste-button disabled" data-paste-target="#worldid-input" type="button" id="worldid-paste-button" tabindex="-1" aria-disabled="true"><i class="fa-solid fa-paste"></i> <span class="d-none d-md-inline">Paste</span></button>
                </div>
              </div>
            </div>
            <div class="row mb-2 manual-input align-items-center">
              <label for="instancenumber-input" class="col-sm-4 col-form-label manual-input-title py-0">Instance Number <span id="instancenumber-text" class="text-body fst-italic"></span></label>
              <div class="col-sm-8">
                <div class="input-group input-group-lg">
                  <input type="text" id="instancenumber-input" class="form-control form-control-lg manual-input-text py-0" placeholder="" aria-label="Paste Text to Instance Number" aria-describedby="instancenumber-paste-button">
                  <button class="btn btn-outline-success" type="button" id="instancenumber-regenerate-button"><i class="fa-solid fa-rotate"></i> <span class="d-none d-md-inline">Regenerate</span></button>
                  <button class="btn btn-outline-secondary paste-button disabled" data-paste-target="#instancenumber-input" type="button" id="instancenumber-paste-button" tabindex="-1" aria-disabled="true"><i class="fa-solid fa-paste"></i> <span class="d-none d-md-inline">Paste</span></button>
                </div>
              </div>
            </div>
            <div class="row mb-2 manual-input align-items-center">
              <label for="instancetype-input-main" class="col-sm-4 col-form-label manual-input-title py-0">Instance Type</label>
              <div class="col-sm-8">
                <select id="instancetype-input-main" class="form-select form-select-lg instancetype-input" aria-label="Select Instance Type">
                  <option value="public">Public</option>
                  <option value="friend+">Friends+</option>
                  <option value="friend">Friends</option>
                  <option value="invite+">Invite+</option>
                  <option value="invite">Invite</option>
                  <option value="group-public">Group Public</option>
                  <option value="group+">Group+</option>
                  <option value="group">Group</option>
                </select>
              </div>
            </div>
            <div class="row mb-2 manual-input align-items-center">
              <label for="instanceid-input" class="col-sm-4 col-form-label manual-input-title py-0">Instance Owner</label>
              <div class="col-sm-8">
                <div class="input-group input-group-lg">
                  <input type="text" id="instanceid-input" class="form-control form-control-lg manual-input-text py-0" placeholder="" aria-label="Paste Text to Instance Owner" aria-describedby="instanceid-paste-button">
                  <button class="btn btn-outline-secondary paste-button disabled" data-paste-target="#instanceid-input" type="button" id="instanceid-paste-button" tabindex="-1" aria-disabled="true"><i class="fa-solid fa-paste"></i> <span class="d-none d-md-inline">Paste</span></button>
                </div>
              </div>
            </div>
            <div class="row mb-2 manual-input align-items-center">
              <label for="region-input" class="col-sm-4 col-form-label manual-input-title py-0">Region</label>
              <div class="col-sm-8">
                <select class="form-select form-select-lg" id="region-input" class="form-control form-control-lg manual-input-text py-0" aria-label="Select Region">
                  <option value="us">United State West</option>
                  <option value="use">United State East</option>
                  <option value="eu">Europe</option>
                  <option value="jp">Japan</option>
                </select>
              </div>
            </div>
            <div class="row manual-input align-items-center">
              <label for="nonce-input" class="col-sm-4 col-form-label manual-input-title py-0"><span class="fst-italic">NONCE</span> <span id="nonce-text" class="text-body fst-italic"></span></label>
              <div class="col-sm-8">
                <div class="input-group input-group-lg">
                  <input type="text" id="nonce-input" class="form-control form-control-lg manual-input-text py-0" placeholder="" aria-label="Paste Text to NONCE" aria-describedby="nonce-paste-button">
                  <button class="btn btn-outline-success" type="button" id="nonce-regenerate-button"><i class="fa-solid fa-rotate"></i> <span class="d-none d-md-inline">Regenerate</span></button>
                  <button class="btn btn-outline-secondary paste-button disabled" data-paste-target="#nonce-input" type="button" id="nonce-paste-button" tabindex="-1" aria-disabled="true"><i class="fa-solid fa-paste"></i> <span class="d-none d-md-inline">Paste</span></button>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="nav-world" role="tabpanel" aria-labelledby="nav-world-tab" tabindex="0">
            <!--
            <div class="d-sm-flex">
              <div class="flex-sm-shrink-0">
                <div id="world-thumbnail">
                  <a href="#" target="_blank" class="d-block"><img src="https://picsum.photos/800/600" class="img-fluid rounded shadow-sm" alt=""></a>
                </div>
                <div id="world-preview-youtube">
                  <iframe class="rounded shadow-sm" width="560" height="315" src="https://www.youtube-nocookie.com/embed/5lPb8JaNdZY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                </div>
              </div>
              <div class="flex-sm-grow-1 mt-2 mt-sm-0 ms-sm-2">
                <div class="h5 border-bottom pb-2" id="world-name">Under Construction</div>
                <div class="d-flex flex-column flex-md-row">
                  <div>
                    <i class="fa-solid fa-circle-user fa-fw text-muted"></i>
                    <span id="world-author">Author Name</span>
                  </div>
                  <div class="ms-md-4">
                    <i class="fa-solid fa-users-rectangle fa-fw text-muted"></i>
                    <span id="world-capacity">8 / 16</span>
                  </div>
                </div>
                <div class="alert alert-light mt-2 mb-0 p-2 shadow-sm" id="world-description">
                  World Description
                </div>
              </div>
            </div>
            -->
            <!--
            data.id
            data.name
            data.description
            data.authorName / data.authorId
            "https://vrchat.com/home/user/" + data.authorId
            data.recommendedCapacity / data.capacity
            data.imageUrl
            data.thumbnailImageUrl
            data.previewYoutubeId
            "https://www.youtube-nocookie.com/embed/" + data.previewYoutubeId
            -->
          </div>
          <div class="tab-pane fade" id="nav-discord" role="tabpanel" aria-labelledby="nav-discord-tab" tabindex="0">
            <div class="mb-2 d-flex flex-column flex-md-row justify-content-md-end align-items-stretch gap-2">
              <div class="flex-md-grow-1">
                <div class="input-group input-group-lg">
                  <button class="btn btn-outline-secondary paste-button disabled" data-paste-target="#parser-input-discord" type="button" id="parser-paste-button" tabindex="-1" aria-disabled="true"><i class="fa-solid fa-paste"></i> <span class="d-none d-md-inline">Paste</span></button>
                  <div class="form-floating">
                    <input type="text" id="parser-input-discord" class="form-control form-control-lg manual-input-text py-0 parser-input" placeholder="" aria-label="Paste Text to Parser" aria-describedby="parser-paste-button">
                    <label for="parser-input-discord" class="">URL Parser</label>
                  </div>
                  <select id="instancetype-input-discord" class="form-select form-select-lg instancetype-input" aria-label="Select Instance Type">
                    <option value="public">Public</option>
                    <option value="friend+">Friends+</option>
                    <option value="friend">Friends</option>
                    <option value="invite+">Invite+</option>
                    <option value="invite">Invite</option>
                    <option value="group-public">Group Public</option>
                    <option value="group+">Group+</option>
                    <option value="group">Group</option>
                  </select>
                </div>
              </div>
              <div class="flex-md-shrink-0 d-flex justify-content-end gap-2">
                <button type="button" class="btn btn-outline-secondary btn-lg shadow-sm" style="--bs-btn-bg: #fff;" id="reset-discord-chip-button"><i class="fa-solid fa-arrow-rotate-left"></i> <span class="d-md-none d-lg-inline">Reset</span></button>
                <button type="button" class="btn btn-outline-success btn-lg shadow-sm copy-button" style="--bs-btn-bg: #fff;" data-copy-target="#discord-chip-textarea"><i class="fa-solid fa-copy"></i> Copy</button>
              </div>
            </div>
            <div class="form-floating shadow-sm">
              <textarea class="form-control form-control-sm textchip-textarea" placeholder="Text Chip for Discord" id="discord-chip-textarea" style="height: 230px"></textarea>
              <label for="discord-chip-textarea">Text Chip for Discord</label>
            </div>
            <div class="d-flex flex-wrap column-gap-4 mt-2">
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="remove-traces-from-chip">
                <label class="form-check-label" for="remove-traces-from-chip" style="user-select: none;">Remove traces.</label>
              </div>
              <div class="form-check form-switch">
                <input class="form-check-input force-regenerate-randoms" type="checkbox" role="switch" id="force-regenerate-randoms-2">
                <label class="form-check-label" for="force-regenerate-randoms-2" style="user-select: none;">Force regenerate randoms.</label>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="nav-twitter" role="tabpanel" aria-labelledby="nav-twitter-tab" tabindex="0">
            <div class="mb-2 d-flex flex-column flex-md-row justify-content-md-end align-items-stretch gap-2">
              <div class="flex-grow-1">
                <div class="input-group input-group-lg">
                  <button class="btn btn-outline-secondary paste-button disabled" data-paste-target="#parser-input-twitter" type="button" id="parser-paste-button" tabindex="-1" aria-disabled="true"><i class="fa-solid fa-paste"></i> <span class="d-none d-md-inline">Paste</span></button>
                  <div class="form-floating">
                    <input type="text" id="parser-input-twitter" class="form-control form-control-lg manual-input-text py-0 parser-input" placeholder="" aria-label="Paste Text to Parser" aria-describedby="parser-paste-button">
                    <label for="parser-input-twitter" class="">URL Parser</label>
                  </div>
                  <select id="instancetype-input-twitter" class="form-select form-select-lg instancetype-input" aria-label="Select Instance Type">
                    <option value="public">Public</option>
                    <option value="friend+">Friends+</option>
                    <option value="friend">Friends</option>
                    <option value="invite+">Invite+</option>
                    <option value="invite">Invite</option>
                    <option value="group-public">Group Public</option>
                    <option value="group+">Group+</option>
                    <option value="group">Group</option>
                  </select>
                </div>
              </div>
              <div class="flex-md-shrink-0 d-flex justify-content-end gap-2">
                <button type="button" class="btn btn-outline-secondary btn-lg shadow-sm" style="--bs-btn-bg: #fff;" id="reset-twitter-chip-button"><i class="fa-solid fa-arrow-rotate-left"></i> <span class="d-md-none d-lg-inline">Reset</span></button>
                <button type="button" class="btn btn-outline-success btn-lg shadow-sm copy-button" style="--bs-btn-bg: #fff;" data-copy-target="#twitter-chip-textarea"><i class="fa-solid fa-copy"></i> Copy</button>
              </div>
            </div>
            <div class="form-floating shadow-sm">
              <textarea class="form-control form-control-sm textchip-textarea" placeholder="Text Chip for Twitter" id="twitter-chip-textarea" style="height: 130px"></textarea>
              <label for="twitter-chip-textarea">Text Chip for Twitter</label>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>

<section class="my-4">
  <div class="container">
    <footer class="py-2">
      <nav class="nav justify-content-center align-items-center small" style="--bs-breadcrumb-divider: '-';">
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item">
            <i class="far fa-copyright fa-lg"></i><span class="visually-hidden">Â©</span> 2025 <span class="text-secondary small" style="--bs-text-opacity: .667;">(Applies to Codes Only)</span>
          </li>
          <li class="breadcrumb-item">
            <a href="https://github.com/pokemonleo" referrerpolicy="no-referrer" rel="nofollow noreferrer noopener" target="_blank">
              <i class="fab fa-github fa-lg"></i>
              <span class="visually-hidden">https://github.com/pokemonleo</span>
            </a>
          </li>
        </ol>
      </nav>
    </footer>
  </div>
</section>

<!--
Used Resources:
- JavaScript Cookie 3.0+
  https://github.com/js-cookie/js-cookie
  via jsDelivr
  https://www.jsdelivr.com
- Bootstrap 5.3+
  https://getbootstrap.com
  via jsDelivr
  https://www.jsdelivr.com
- Font Awesome 6.7.2
  https://fontawesome.com
  via cdnjs/ https://cdnjs.com
- flag-icons 7.3.2
  https://flagicons.lipis.dev
  via cdnjs/ https://cdnjs.com
- CORS Proxies
  https://github.com/pphosting/cors-proxies-list
- VRChat API
  https://vrchatapi.github.io
-->

<!--
<ul>
  <li>Launch Game Link: <span id="gamelink"></span></li>
  <li>Web Launch Link: <span id="weblink"></li>
  <li>Web Info Link: <span id="infolink"></li>
</ul>
-->

<div id="background-image"></div>

<!-- Modal -->
<div class="modal fade" id="lightbox-modal" tabindex="-1" aria-labelledby="lightbox-modal-label" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content" style="--bs-modal-bg: transparent">
      <h1 class="modal-title visually-hidden" id="lightbox-modal-label">Modal title</h1>
      <div id="lightbox-modal-contents">

      </div>
      <!--
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="lightbox-modal-label">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
      -->
    </div>
  </div>
</div>

</body>

<script src="https://cdn.jsdelivr.net/npm/js-cookie@3/dist/js.cookie.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/js/bootstrap.bundle.min.js"  crossorigin="anonymous" referrerpolicy="no-referrer" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/js/all.min.js" integrity="sha512-b+nQTCdtTBIRIbraqNEwsjB6UvL3UEMkXnhzd8awtCYh0Kcsjl9uEgwVFVbhoj3uu1DO1ZMacNvLoyJJiNfcvg==" crossorigin="anonymous" referrerpolicy="no-referrer" defer></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/basicLightbox/5.0.0/basicLightbox.min.js" integrity="sha512-jIc3kBeyfyLXBTmzUIXnbGiVK2wgWGcDIkJwkFW4bQ6v2h/piOKLwIfy3wOmKHWIu8DgYSKVth0DMUvExMYcOw==" crossorigin="anonymous" referrerpolicy="no-referrer" defer></script> -->
<script>
// https://vrchatapi.github.io/tutorials/instances/
// https://thegreatpug.com/vrchat-link-generator/

(() =>
{

  const instance =
  {
    set instance(_instance)
    {

      const {
        __worldId,
        __instanceNumber,
        __isInstanceNumberSpecified,
        __isInstanceNumberGenerated,
        __instanceType,
        __instanceOwner,
        __region,
        __nonce,
        __isNonceReused,
        __isNonceGenerated,
      } = _instance

      this.worldId = __worldId
      this._instanceNumber = __instanceNumber
      this._isInstanceNumberSpecified = __isInstanceNumberSpecified
      this._isInstanceNumberGenerated = __isInstanceNumberGenerated
      this._instanceType = __instanceType
      this._instanceOwner = __instanceOwner
      this._region = __region
      this._nonce = __nonce
      this._isNonceReused = __isNonceReused
      this._isNonceGenerated = __isNonceGenerated

    },

    get instance()
    {
      return {
        worldId: this.worldId,
        instanceNumber: this._instanceNumber,
        isInstanceNumberSpecified: this._isInstanceNumberSpecified,
        isInstanceNumberGenerated: this._isInstanceNumberGenerated,
        instanceType: this._instanceType,
        instanceOwner: this._instanceOwner,
        region: this._region,
        nonce: this._nonce,
        isNonceReused: this._isNonceReused,
        isNonceGenerated: this._isNonceGenerated,
      }
    },

    set instanceType(type)
    {
      this._instanceType = type
    },

    set defaultInstanceType(type)
    {
      Cookies.set("defaultInstanceType", type, { expires: 365, })
    },

    get defaultInstanceType()
    {
      return Cookies.get("defaultInstanceType")
    },

    get instanceReadableType()
    {
      if (this._instanceType)
      {
        return getReadableTypeByInstanceInput(this._instanceType)
      }

      if (this._instanceOwner)
      {
        if (this.defaultInstanceType)
        {
          return getReadableTypeByInstanceInput(this.defaultInstanceType)
        }
      }

      return "Public"
    },

    get instanceType()
    {
      if (this._instanceType)
      {
        return getNormalizedTypeByInstanceInput(this._instanceType)
      }

      if (this._instanceOwner)
      {
        if (this.defaultInstanceType)
        {
          return getNormalizedTypeByInstanceInput(this.defaultInstanceType)
        }
      }

      return "public"
    },

    get instanceAPIType()
    {
      if (this._instanceType)
      {
        return getAPITypeByInstanceInput(this._instanceType)
      }

      if (this._instanceOwner)
      {
        if (this.defaultInstanceType)
        {
          return getAPITypeByInstanceInput(this.defaultInstanceType)
        }
      }

      return "public"
    },

    get canRequestInvite()
    {
      return this._instanceType === "invite+" || this._instanceType === "invite-plus"
    },

    get groupAccessType()
    {
      if (this._instanceType === "group-public")
      {
        return "public"
      }

      if (this._instanceType === "group+" || this._instanceType === "group-plus")
      {
        return "plus"
      }

      if (this._instanceType === "group" || this._instanceType === "group-only" || this._instanceType === "group-member" || this._instanceType === "group-member-only" || this._instanceType === "group-members" || this._instanceType === "group-members-only")
      {
        return "members"
      }

      return
    },

    set nonce(uuid)
    {
      if (uuid)
      {
        this._nonce = uuid
        this._isNonceReused = true
        delete this._isNonceGenerated
      }
      else
      {
        delete this._nonce
        delete this._isNonceReused
        delete this._isNonceGenerated
      }
    },

    get nonce()
    {
      if (!this._nonce)
      {
        this._nonce = generateNonce()
        this._isNonceGenerated = true
        delete this._isNonceReused
      }

      return this._nonce
    },

    set region(_region)
    {
      this._region = _region
      if (_region)
      {
        if (!this.defaultRegion)
        {
          this.defaultRegion = _region
        }
      }
    },

    set defaultRegion(_region)
    {
      Cookies.set("defaultRegion", _region, { expires: 365, })
    },

    get defaultRegion()
    {
      return Cookies.get("defaultRegion")
    },

    get region()
    {
      if (!this._region)
      {
        if (this.defaultRegion)
        {
          this._region = this.defaultRegion
        }
      }

      return this._region || "us"
    },

    get readableRegionLong()
    {
      switch (this.region)
      {
      case "use":
        return "United States East"
        break
      case "usw":
        return "United States West"
        break
      case "eu":
        return "Europe"
        break
      case "jp":
        return "Japan"
        break
      }

      return "United States East"
    },

    // Emoji is not allowed in the text of Embed Link in Discord
    get readableRegionDiscord()
    {
      switch (this.region)
      {
      case "use":
        return ":flag_us:/E"
        break
      case "usw":
        return ":flag_us:/W"
        break
      case "eu":
        return ":flag_eu:"
        break
      case "jp":
        return ":flag_jp:"
        break
      }

      return ":flag_us:/E"
    },

    get readableRegionShort()
    {
      switch (this.region)
      {
      case "use":
        return "USE"
        break
      case "usw":
        return "USW"
        break
      case "eu":
        return "EU"
        break
      case "jp":
        return "JP"
        break
      }

      return "USE"
    },

    set instanceOwner(owner)
    {
      this._instanceOwner = owner
      if (owner)
      {
        if (!this.defaultInstanceOwner)
        {
          this.defaultInstanceOwner = owner
        }
      }
    },

    set defaultInstanceOwner(owner)
    {
      if (this.instanceAPIType === "group" && owner.match(/^grp_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
      {
        Cookies.set("defaultGroupInstanceOwner", owner, { expires: 365, })
        return
      }
      if (this.instanceAPIType !== "group" && this.instanceAPIType !== "public" && owner.match(/^usr_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
      {
        Cookies.set("defaultUserInstanceOwner", owner, { expires: 365, })
        return
      }

      // Cookies.set("defaultInstanceOwner", owner, { expires: 365, })
    },

    get defaultInstanceOwner()
    {
      if (this.instanceAPIType === "group")
      {
        return Cookies.get("defaultGroupInstanceOwner")
      }

      if (this.instanceAPIType !== "group" && this.instanceAPIType !== "public")
      {
        return Cookies.get("defaultUserInstanceOwner")
      }

      // return Cookies.get("defaultInstanceOwner")
    },

    get instanceOwner()
    {
      if (!this._instanceOwner && this.instanceAPIType !== "public")
      {
        if (this.defaultInstanceOwner)
        {
          this._instanceOwner = this.defaultInstanceOwner
        }
      }

      return this._instanceOwner
    },

    set instanceNumber(number)
    {
      if (number)
      {
        this._instanceNumber = number
        this._isInstanceNumberSpecified = true
        delete this._isInstanceNumberGenerated
      }
      else
      {
        delete this._instanceNumber
        delete this._isInstanceNumberSpecified
        delete this._isInstanceNumberGenerated
      }
    },

    get instanceNumber()
    {
      if (!this._instanceNumber || this._instanceNumber === 0 || this._instanceNumber === "0" || this._instanceNumber.match(/[^A-Za-z0-9]/))
      {
        if (this.instanceAPIType === "public")
        {
          delete this._isInstanceNumberGenerated
          delete this._isInstanceNumberSpecified
          return ""
        }

        this._instanceNumber = randomInstanceNumber("number-only") // Random String from "A-Za-z0-9" with Length of 5
        this._isInstanceNumberGenerated = true
        delete this._isInstanceNumberSpecified
      }

      return this._instanceNumber
    },

    __gameLink: "vrchat://launch",
    // __gameLink: "vrchat://launch?id=",
    // __webLink: "https://vrchat.com/home/launch?worldId=",
    __gameParams: (() =>
    {
      const gameParams = new URLSearchParams()
      gameParams.toString = function()
      {
        string = ""
        this.forEach((value, id) =>
        {
          if (string)
          {
            string += "&"
          }
          string += id + "=" + value
        })
        return string
      }
      return gameParams
    })(),

    __webURL: new URL("https://vrchat.com/home/launch"),
    __infoURL: new URL("https://vrchat.com/home/world/"),
    __homeURL: new URL("https://vrchat.com/home"),

    get instanceId()
    {
      if (!this.instanceOwner && this.instanceAPIType !== "public")
      {
        // throw new Error("No instanceOwner")
        console.error("No instanceOwner for non-public instance")
        this.alertNoInstanceOwner.show(this.__alertElementNoInstanceOwner)
        return ""
      }
      else
      {
        this.alertNoInstanceOwner.hide(this.__alertElementNoInstanceOwner)
      }

      if (this.instanceAPIType === "group" && !this.instanceOwner.match(/^grp_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
      {
        console.error("Instance Owner Must Be Valid Group ID for Group Instance")
        this.alertNoInstanceOwner.show(this.__alertElementNotUserInstanceOwner)
        return
      }
      else
      {
        this.alertNoInstanceOwner.hide(this.__alertElementNotUserInstanceOwner)
      }

      if (this.instanceAPIType !== "group" && this.instanceAPIType !== "public" && !this.instanceOwner.match(/^usr_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
      {
        console.error("Instance Owner Must Be Valid User ID for Non-Group Instance")
        this.alertNoInstanceOwner.show(this.__alertElementNotGroupInstanceOwner)
        return
      }
      else
      {
        this.alertNoInstanceOwner.hide(this.__alertElementNotGroupInstanceOwner)
      }

      let instanceId = ""

      // Public links dont seem to allow owners any more?
      if (this.instanceAPIType === "public")
      {
        instanceId = this.instanceNumber
      }
      else
      {
        instanceId = this.instanceNumber + "~" + this.instanceAPIType + "(" + this.instanceOwner + ")"
      }

      //If the instance is invite+ we need to add in "~canRequestInvite()"
      if (this.canRequestInvite === true)
      {
        instanceId += "~canRequestInvite"
      }

      if (this.groupAccessType)
      {
        instanceId += "~groupAccessType(" + this.groupAccessType + ")"
      }

      if (this.region)
      {
        instanceId += "~region(" + this.region + ")"
      }

      if (this.instanceAPIType !== "public")
      {
        instanceId += "~nonce(" + this.nonce + ")"
      }

      return instanceId
    },

    get sharableInstanceId()
    {
      if (!this.instanceOwner && this.instanceAPIType !== "public")
      {
        // throw new Error("No instanceOwner")
        console.error("No instanceOwner for non-public instance")
        this.alertNoInstanceOwner.show(this.__alertElementNoInstanceOwner)
        return ""
      }
      else
      {
        this.alertNoInstanceOwner.hide(this.__alertElementNoInstanceOwner)
      }

      if (this.instanceAPIType === "group" && !this.instanceOwner.match(/^grp_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
      {
        console.error("Instance Owner Must Be Valid Group ID for Group Instance")
        return
      }

      if (this.instanceAPIType !== "group" && this.instanceAPIType !== "public" && !this.instanceOwner.match(/^usr_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
      {
        console.error("Instance Owner Must Be Valid User ID for Non-Group Instance")
        return
      }

      let instanceId = ""

      // Public links dont seem to allow owners any more?
      if (this.instanceAPIType === "public")
      {
        instanceId = ""
      }
      else
      {
        instanceId = "" + "~" + this.instanceAPIType + "(" + this.instanceOwner + ")"
      }

      //If the instance is invite+ we need to add in "~canRequestInvite()"
      if (this.canRequestInvite === true)
      {
        instanceId += "~canRequestInvite"
      }

      if (this.groupAccessType)
      {
        instanceId += "~groupAccessType(" + this.groupAccessType + ")"
      }

      if (this.region)
      {
        instanceId += "~region(" + this.region + ")"
      }

      return instanceId
    },

    get pubilcInstanceId()
    {
      let instanceId = ""

      if (this.region)
      {
        instanceId += "~region(" + this.region + ")"
      }

      return instanceId
    },

    get gameLink()
    {
      if (!this.worldId)
      {
        return this.__gameLink
      }

      this.__gameParams.set("id", this.worldId + ":" + this.instanceId)
      return this.__gameLink + "?" + this.__gameParams.toString()
    },

    get webURL()
    {
      if (!this.worldId)
      {
        return this.__homeURL.toString()
      }

      this.__webURL.searchParams.set("worldId", this.worldId)
      this.__webURL.searchParams.set("instanceId", this.instanceId)
      return this.__webURL.toString()
    },

    get webPublicURL()
    {
      if (!this.worldId)
      {
        return this.__homeURL.toString()
      }

      const webPublicURL = new URL(this.__webURL.toString())
      webPublicURL.searchParams.set("worldId", this.worldId)
      webPublicURL.searchParams.set("instanceId", this.pubilcInstanceId)
      return webPublicURL.toString()
    },

    get infoURL()
    {
      if (!this.worldId)
      {
        return this.__homeURL.toString()
      }

      return this.__infoURL.origin + this.__infoURL.pathname.replace(/\/$/, "") + "/" + this.worldId
    },

    get thisHashURL()
    {
      const _u = new URL(location)
      const params = _u.searchParams

      for (const key of Array.from(params.keys()))
      {
        // console.log(key, params.size)
        params.delete(key)
        // console.log(params.size)
      }

      if (!this.worldId)
      {
        return _u.toString()
      }

      _u.hash = this.worldId + ":" + this.instanceId
      return _u.toString()
    },

    get sharableHashURL()
    {
      const _u = new URL(location)
      const params = _u.searchParams

      for (key of params.keys())
      {
        params.delete(key)
      }

      if (!this.worldId)
      {
        return _u.toString()
      }

      _u.hash = this.worldId + ":" + this.sharableInstanceId
      return _u.toString()
    },

    get thisURL()
    {
      const _u = new URL(location)
      const params = _u.searchParams

      for (key of params.keys())
      {
        params.delete(key)
      }

      if (this.worldId)
      {
        params.set("w", this.worldId)
      }
      if (this.instanceNumber)
      {
        params.set("n", this.instanceNumber)
      }
      if (this.instanceType)
      {
        params.set("t", this.instanceType)
      }
      if (this.instanceOwner)
      {
        params.set("i", this.instanceOwner)
      }
      if (this.region)
      {
        params.set("r", this.region)
      }
      if (this.nonce)
      {
        params.set("x", this.nonce)
      }

      return _u.toString()
    },

    __alertElementNoInstanceOwner: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("alert", "alert-danger")
      div.role = "alert"
      div.textContent = "Instance owner is necessary for non-public instance."
      return div
    })(),
    __alertElementNotUserInstanceOwner: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("alert", "alert-danger")
      div.role = "alert"
      div.textContent = "Instance owner must be a valid user ID for non-group instance."
      return div
    })(),
    __alertElementNotGroupInstanceOwner: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("alert", "alert-danger")
      div.role = "alert"
      div.textContent = "Instance owner must be a valid group ID for group instance."
      return div
    })(),

    alertNoInstanceOwner:
    {
      get alertContainer()
      {
        if (this.__alertContainer)
        {
          return this.__alertContainer
        }

        this.__alertContainer = document.getElementById("error-messages-container")
        return this.__alertContainer
      },

      show: function(...alertElements)
      {
        for (const element of alertElements)
        {
          this.alertContainer.append(element)
        }
      },

      hide: function(...alertElements)
      {
        for (const element of alertElements)
        {
          element.remove()
        }
      },
    },

    set removeTraces(isRemoveTraces)
    {
      this._removeTraces = !!isRemoveTraces
      this.defaultRemoveTraces = !!isRemoveTraces
    },

    get removeTraces()
    {
      if (this._removeTraces === true || this._removeTraces === false)
      {
        return this._removeTraces
      }

      if (this.defaultRemoveTraces === true || this.defaultRemoveTraces === false)
      {
        return this.defaultRemoveTraces
      }

      return
    },

    set defaultRemoveTraces(isRemoveTraces)
    {
      Cookies.set("defaultRemoveTraces", isRemoveTraces ? "1" : "0", { expires: 365, })
    },

    get defaultRemoveTraces()
    {
      return Cookies.get("defaultRemoveTraces") === "1" ? true : false
    },

    set forceRegenerateRandoms(isForceRegenerateRandoms)
    {
      this._forceRegenerateRandoms = !!isForceRegenerateRandoms
      this.defaultForceRegenerateRandoms = !!isForceRegenerateRandoms
    },

    get forceRegenerateRandoms()
    {
      if (this._forceRegenerateRandoms === true || this._forceRegenerateRandoms === false)
      {
        return this._forceRegenerateRandoms
      }

      if (this.defaultForceRegenerateRandoms === true || this.defaultForceRegenerateRandoms === false)
      {
        return this.defaultForceRegenerateRandoms
      }

      return
    },

    set defaultForceRegenerateRandoms(isForceRegenerateRandoms)
    {
      Cookies.set("defaultForceRegenerateRandoms", isForceRegenerateRandoms ? "1" : "0", { expires: 365, })
    },

    get defaultForceRegenerateRandoms()
    {
      const _defaultForceRegenerateRandoms = Cookies.get("defaultForceRegenerateRandoms")

      if (_defaultForceRegenerateRandoms === "1")
      {
        return true
      }

      if (_defaultForceRegenerateRandoms === "0")
      {
        return false
      }

      return
    },

  }

  const world =
  {
    get id()
    {
      if (!this.data)
      {
        return
      }
      return this.data.id
    },

    get name()
    {
      if (!this.data)
      {
        return
      }
      return sanitizeVRChatText(this.data.name)
    },

    get title()
    {
      return this.name
    },

    get description()
    {
      if (!this.data)
      {
        return
      }
      return sanitizeVRChatText(this.data.description)
    },

    // From https://github.com/silentroach/twitter-regexps
    // _hashtagRegexp: /(?=^|\s|.|\b)(?<=#|ï¼)([a-z0-9\-_\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u{0259}\u{025b}\u{0263}\u{0268}\u{026f}\u{0272}\u{0289}\u{028b}\u{02bb}\u0300-\u036f\u1e00-\u1eff\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u{05c7}\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\u{fb3e}\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u{06ff}\u0750-\u077f\u{08a0}\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c-\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff10-\uff19\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff\u{3003}\u{3005}\u{303b}]*[a-z_\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u{0259}\u{025b}\u{0263}\u{0268}\u{026f}\u{0272}\u{0289}\u{028b}\u{02bb}\u0300-\u036f\u1e00-\u1eff\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u{05c7}\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\u{fb3e}\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u{06ff}\u0750-\u077f\u{08a0}\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c-\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff10-\uff19\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff\u{3003}\u{3005}\u{303b}][a-z0-9_\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u{0259}\u{025b}\u{0263}\u{0268}\u{026f}\u{0272}\u{0289}\u{028b}\u{02bb}\u0300-\u036f\u1e00-\u1eff\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u{05c7}\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\u{fb3e}\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u{06ff}\u0750-\u077f\u{08a0}\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c-\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff10-\uff19\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff\u{3003}\u{3005}\u{303b}]*)(?=s|\b|\W|$)/gi,
    _hashtagRegexp: /(?<=(?:^|\uFE0E|\uFE0F|$|(?!(?:[\w\xaa\xb5\xb7\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0377\u037a-\u037d\u0388-\u038a\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f0b\u0f0c\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abe\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u2071\u207f\u2090-\u209c\u20d0-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3003\u3005\u3006\u301c\u302a-\u302f\u3031-\u3035\u303b\u303c\u3041-\u3096\u3099-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua672\ua674-\ua69d\ua69f-\ua6e5\ua6f0\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf870-\uf87f\uf882\uf884-\uf89f\uf8b8\uf8c1-\uf8d6\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff41-\uff5a\uff5e\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|(?=[\uD800-\uDBFF][\uDC00-\uDFFF])(?:\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\uddfd\ude80-\ude9c\udea0-\uded0\udee0\udf00-\udf1f\udf30-\udf40\udf42-\udf49\udf50-\udf7a\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud801[\udc00-\udc9d\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00-\ude03\ude05\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude33\ude38-\ude3a\ude3f\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee6\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48]|\ud804[\udc00-\udc46\udc7f-\udcba\udcd0-\udce8\udd00-\udd34\udd50-\udd73\udd76\udd80-\uddc4\uddda\ude00-\ude11\ude13-\ude37\udeb0-\udeea\udf01-\udf03\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3c-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf5d-\udf63\udf66-\udf6c\udf70-\udf74]|\ud805[\udc80-\udcc5\udcc7\udd80-\uddb5\uddb8-\uddc0\ude00-\ude40\ude44\ude80-\udeb7]|\ud806[\udca0-\udcdf\udcff\udec0-\udef8]|\ud808[\udc00-\udf98]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udef0-\udef4\udf00-\udf36\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\udf00-\udf44\udf50-\udf7e\udf8f-\udf9f]|\ud82c[\udc00\udc01]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9d\udc9e]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud83a[\udc00-\udcc4\udcd0-\udcd6]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d]|\ud87e[\udc00-\ude1d]|\udb40[\udd00-\uddef]|\ud801[\udca0-\udca9]|\ud804[\udc66-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udef0-\udef9]|\ud805[\udcd0-\udcd9\ude50-\ude59\udec0-\udec9]|\ud806[\udce0-\udce9]|\ud81a[\ude60-\ude69\udf50-\udf59]|\ud835[\udfce-\udfff]))|&)(?:[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF])))(?<=[#ï¼])(?!\uFE0F|\u20E3)((?:[\w\xaa\xb5\xb7\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0377\u037a-\u037d\u0388-\u038a\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f0b\u0f0c\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abe\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u2071\u207f\u2090-\u209c\u20d0-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3003\u3005\u3006\u301c\u302a-\u302f\u3031-\u3035\u303b\u303c\u3041-\u3096\u3099-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua672\ua674-\ua69d\ua69f-\ua6e5\ua6f0\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf870-\uf87f\uf882\uf884-\uf89f\uf8b8\uf8c1-\uf8d6\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff41-\uff5a\uff5e\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|(?=[\uD800-\uDBFF][\uDC00-\uDFFF])(?:\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\uddfd\ude80-\ude9c\udea0-\uded0\udee0\udf00-\udf1f\udf30-\udf40\udf42-\udf49\udf50-\udf7a\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud801[\udc00-\udc9d\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00-\ude03\ude05\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude33\ude38-\ude3a\ude3f\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee6\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48]|\ud804[\udc00-\udc46\udc7f-\udcba\udcd0-\udce8\udd00-\udd34\udd50-\udd73\udd76\udd80-\uddc4\uddda\ude00-\ude11\ude13-\ude37\udeb0-\udeea\udf01-\udf03\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3c-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf5d-\udf63\udf66-\udf6c\udf70-\udf74]|\ud805[\udc80-\udcc5\udcc7\udd80-\uddb5\uddb8-\uddc0\ude00-\ude40\ude44\ude80-\udeb7]|\ud806[\udca0-\udcdf\udcff\udec0-\udef8]|\ud808[\udc00-\udf98]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udef0-\udef4\udf00-\udf36\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\udf00-\udf44\udf50-\udf7e\udf8f-\udf9f]|\ud82c[\udc00\udc01]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9d\udc9e]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud83a[\udc00-\udcc4\udcd0-\udcd6]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d]|\ud87e[\udc00-\ude1d]|\udb40[\udd00-\uddef]|\ud801[\udca0-\udca9]|\ud804[\udc66-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udef0-\udef9]|\ud805[\udcd0-\udcd9\ude50-\ude59\udec0-\udec9]|\ud806[\udce0-\udce9]|\ud81a[\ude60-\ude69\udf50-\udf59]|\ud835[\udfce-\udfff]))*(?:[a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0377\u037a-\u037d\u0388-\u038a\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07ca-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09f0\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a70-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u103f\u1050-\u108f\u109a-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u180b-\u180d\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f\u1aa7\u1ab0-\u1abe\u1b00-\u1b4b\u1b6b-\u1b73\u1b80-\u1baf\u1bba-\u1bf3\u1c00-\u1c37\u1c4d-\u1c4f\u1c5a-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u20d0-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005\u3006\u302a-\u302f\u3031-\u3035\u303b\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua672\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6e5\ua6f0\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8e0-\ua8f7\ua8fb\ua90a-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf\ua9e0-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf870-\uf87f\uf882\uf884-\uf89f\uf8b8\uf8c1-\uf8d6\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|(?=[\uD800-\uDBFF][\uDC00-\uDFFF])(?:\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\uddfd\ude80-\ude9c\udea0-\uded0\udee0\udf00-\udf1f\udf30-\udf40\udf42-\udf49\udf50-\udf7a\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud801[\udc00-\udc9d\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00-\ude03\ude05\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude33\ude38-\ude3a\ude3f\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee6\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48]|\ud804[\udc00-\udc46\udc7f-\udcba\udcd0-\udce8\udd00-\udd34\udd50-\udd73\udd76\udd80-\uddc4\uddda\ude00-\ude11\ude13-\ude37\udeb0-\udeea\udf01-\udf03\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3c-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf5d-\udf63\udf66-\udf6c\udf70-\udf74]|\ud805[\udc80-\udcc5\udcc7\udd80-\uddb5\uddb8-\uddc0\ude00-\ude40\ude44\ude80-\udeb7]|\ud806[\udca0-\udcdf\udcff\udec0-\udef8]|\ud808[\udc00-\udf98]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udef0-\udef4\udf00-\udf36\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\udf00-\udf44\udf50-\udf7e\udf8f-\udf9f]|\ud82c[\udc00\udc01]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9d\udc9e]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud83a[\udc00-\udcc4\udcd0-\udcd6]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d]|\ud87e[\udc00-\ude1d]|\udb40[\udd00-\uddef]))(?:[\w\xaa\xb5\xb7\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0377\u037a-\u037d\u0388-\u038a\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f0b\u0f0c\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abe\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u2071\u207f\u2090-\u209c\u20d0-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3003\u3005\u3006\u301c\u302a-\u302f\u3031-\u3035\u303b\u303c\u3041-\u3096\u3099-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua672\ua674-\ua69d\ua69f-\ua6e5\ua6f0\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf870-\uf87f\uf882\uf884-\uf89f\uf8b8\uf8c1-\uf8d6\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff41-\uff5a\uff5e\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|(?=[\uD800-\uDBFF][\uDC00-\uDFFF])(?:\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\uddfd\ude80-\ude9c\udea0-\uded0\udee0\udf00-\udf1f\udf30-\udf40\udf42-\udf49\udf50-\udf7a\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud801[\udc00-\udc9d\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00-\ude03\ude05\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude33\ude38-\ude3a\ude3f\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee6\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48]|\ud804[\udc00-\udc46\udc7f-\udcba\udcd0-\udce8\udd00-\udd34\udd50-\udd73\udd76\udd80-\uddc4\uddda\ude00-\ude11\ude13-\ude37\udeb0-\udeea\udf01-\udf03\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3c-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf5d-\udf63\udf66-\udf6c\udf70-\udf74]|\ud805[\udc80-\udcc5\udcc7\udd80-\uddb5\uddb8-\uddc0\ude00-\ude40\ude44\ude80-\udeb7]|\ud806[\udca0-\udcdf\udcff\udec0-\udef8]|\ud808[\udc00-\udf98]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udef0-\udef4\udf00-\udf36\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\udf00-\udf44\udf50-\udf7e\udf8f-\udf9f]|\ud82c[\udc00\udc01]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9d\udc9e]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud83a[\udc00-\udcc4\udcd0-\udcd6]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d]|\ud87e[\udc00-\ude1d]|\udb40[\udd00-\uddef]|\ud801[\udca0-\udca9]|\ud804[\udc66-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udef0-\udef9]|\ud805[\udcd0-\udcd9\ude50-\ude59\udec0-\udec9]|\ud806[\udce0-\udce9]|\ud81a[\ude60-\ude69\udf50-\udf59]|\ud835[\udfce-\udfff]))*)/gi,
    // _hashtagRegexp: /^(#|ï¼)[^ !@#$%^&*(),.?":{}|<>]*$/gi
    get hashtags()
    {
      const matches = []
      if (this.title)
      {
        matches.push(...Array.from(this.title.match(this._hashtagRegexp) || []))
      }
      if (this.description)
      {
        matches.push(...Array.from(this.description.match(this._hashtagRegexp) || []))
      }
      const uniqueMatches = [...new Set(matches)].filter(hashtag => !!hashtag.match(/[^0-9]/))

      return uniqueMatches
    },

    get authorName()
    {
      if (!this.data)
      {
        return
      }
      return sanitizeVRChatText(this.data.authorName)
    },

    get authorId()
    {
      if (!this.data)
      {
        return
      }
      return this.data.authorId
    },

    get authorUrl()
    {
      if (!this.authorId)
      {
        return "https://vrchat.com/home"
      }
      return "https://vrchat.com/home/user/" + this.authorId
    },

    get created_at()
    {
      if (!this.data)
      {
        return
      }

      if (!this.data.created_at)
      {
        return
      }

      return new Date(this.data.created_at)
    },

    get labsPublicationDate()
    {
      if (!this.data)
      {
        return
      }

      if (!this.data.labsPublicationDate)
      {
        return
      }

      return new Date(this.data.labsPublicationDate)
    },

    get publicationDate()
    {
      if (!this.data)
      {
        return
      }

      if (!this.data.publicationDate)
      {
        return
      }

      return new Date(this.data.publicationDate)
    },

    get updated_at()
    {
      if (!this.data)
      {
        return
      }

      if (!this.data.updated_at)
      {
        return
      }

      return new Date(this.data.updated_at)
    },

    get isRecentlyPublicated() // Two Months
    {
      if (!this.publicationDate)
      {
        return false
      }

      const delta = (new Date()).valueOf() - this.publicationDate.valueOf()
      return delta < 60 * 24 * 60 * 60 * 1000
    },

    get isRecentlyLabsPublicated() // Two Months
    {
      if (!this.labsPublicationDate)
      {
        return false
      }

      const delta = (new Date()).valueOf() - this.labsPublicationDate.valueOf()
      return delta < 60 * 24 * 60 * 60 * 1000
    },

    get isRecentlyCreated() // Two Months
    {
      if (!this.created_at)
      {
        return false
      }

      const delta = (new Date()).valueOf() - this.created_at.valueOf()
      return delta < 60 * 24 * 60 * 60 * 1000
    },

    get isRecentlyUpdated() // Two Weeks
    {
      if (!this.updated_at)
      {
        return false
      }

      const delta = (new Date()).valueOf() - this.updated_at.valueOf()
      return delta < 14 * 24 * 60 * 60 * 1000
    },

    get recommendedCapacity()
    {
      if (!this.data)
      {
        return 0
      }
      return this.data.recommendedCapacity
    },

    get maximumCapacity()
    {
      if (!this.data)
      {
        return 0
      }
      return this.data.capacity
    },

    get capacity()
    {
      return this.recommendedCapacity + "/" + this.maximumCapacity
    },

    get imageUrl()
    {
      if (!this.data)
      {
        return
      }
      return this.data.imageUrl
    },

    get thumbnailImageUrl()
    {
      if (!this.data)
      {
        return
      }
      return this.data.thumbnailImageUrl
    },

    get previewYoutubeId()
    {
      if (!this.data)
      {
        return
      }
      return this.data.previewYoutubeId
    },

    // __thumbnailImageModalTemplateElement: (() =>
    // {
    //   const template = document.createElement("template")
    //   return template
    // })(),
    // __thumbnailImageModalElement: (() =>
    // {
    //   const div = document.createElement("div")
    //   div.classList.add("modal")
    //   return div
    // })(),
    __thumbnailImageThumbnailElement: (() =>
    {
      const img = document.createElement("img")
      img.classList.add("img-fluid", "rounded", "shadow-sm")
      img.src = "https://www.dummyimage.com/300x200/bbb/444.png&text=Fetching..."
      img.alt = "Fetching..."

      img.decoding = "async"
      img.fetchPriority = "low"
      img.width = 800
      img.height = 600
      img.loading = "lazy"
      img.referrerPolicy = "no-referrer"
      return img
    })(),
    __thumbnailLinkElement: (() =>
    {
      const a = document.createElement("a")
      a.classList.add("d-block")
      a.target = "_blank"
      a.href = "#"
      a.referrerPolicy = "no-referrer"
      a.relList.add("nofollow", "noreferrer", "noopener")
      // a.addEventListener("click", event =>
      // {
      //   if (!event)
      //   {
      //     return
      //   }

      //   if (!event.target)
      //   {
      //     return
      //   }

      //   if (event.target.href === "#")
      //   {
      //     event.preventDefault()
      //   }
      // })
      return a
    })(),
    __thumbnailImageElement: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("world-thumbnail")
      return div
    })(),
    get thumbnailImage()
    {
      this.__thumbnailLinkElement.href = this.imageUrl || "#"
      this.__thumbnailImageThumbnailElement.src = this.thumbnailImageUrl || "https://www.dummyimage.com/300x200/bbb/444.png&text=No thumbnail"
      this.__thumbnailImageThumbnailElement.alt = this.thumbnailImageUrl ? "Thumbnail of " + this.title : "No thumbnail for " + this.title
      return this.__thumbnailImageElement
    },
    // get image()
    // {
    //   this.__thumbnailImageImageElement.src = this.imageUrl || "https://www.dummyimage.com/300x200/bbb/444.png&text=No thumbnail"
    //   this.__thumbnailImageImageElement.alt = this.imageUrl ? "Thumbnail of " + this.title : "No thumbnail for " + this.title
    //   return this.__thumbnailImageImageElement
    // },

    __frameYoutubeElement: (() =>
    {
      const iframe = document.createElement("iframe")
      iframe.classList.add("rounded", "shadow-sm")
      iframe.width = 560
      iframe.height = 315
      iframe.src = ""
      iframe.title = "YouTube video player"
      iframe.frameBorder = 0
      iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      // iframe.referrerPolicy = "strict-origin-when-cross-origin"
      iframe.referrerPolicy = "no-referrer"
      iframe.allowFullscreen = true
      return iframe
    })(),
    __thumbnailYoutubeElement: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("world-preview-youtube")
      return div
    })(),
    get thumbnailYoutube()
    {
      this.__frameYoutubeElement.src = this.previewYoutubeId ? "https://www.youtube-nocookie.com/embed/" + this.previewYoutubeId : ""
      return this.__thumbnailYoutubeElement
    },

    __worldChipDescriptionElement: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("alert", "alert-light", "mt-2", "mb-0", "p-2", "shadow-sm")
      return div
    })(),
    __worldChipCapacityMaximumTooltipElement: (() =>
    {
      const span = document.createElement("span")
      span.textContent = 0
      return span
    })(),
    __worldChipCapacityRecommendedTooltipElement: (() =>
    {
      const span = document.createElement("span")
      span.textContent = 0
      return span
    })(),
    __worldChipCapacityMaximumElement: (() =>
    {
      const span = document.createElement("span")
      span.classList.add("ms-2")
      span.textContent = 0
      return span
    })(),
    __worldChipCapacityDividerElement: (() =>
    {
      const span = document.createElement("span")
      span.classList.add("ms-2")
      span.textContent = "/"
      return span
    })(),
    __worldChipCapacityRecommendedElement: (() =>
    {
      const span = document.createElement("span")
      span.classList.add("ms-2")
      span.textContent = 0
      return span
    })(),
    __worldChipCapacityIconElement: (() =>
    {
      const i = document.createElement("i")
      i.classList.add("fa-solid", "fa-users-rectangle", "fa-fw", "text-muted")
      return i
    })(),
    __worldChipCapacityTooltipElement: (() =>
    {
      const span = document.createElement("span")
      return span
    })(),
    __worldChipCapacityElement: (() =>
    {
      const div = document.createElement("div")
      return div
    })(),
    __worldChipAuthorLinkElement: (() =>
    {
      const a = document.createElement("a")
      a.classList.add("ms-2", "text-decoration-none")
      a.href = "#"
      a.target = "_blank"
      a.referrerPolicy = "no-referrer"
      a.relList.add("nofollow", "noreferrer", "noopener")
      a.addEventListener("click", event =>
      {
        if (!event)
        {
          return
        }

        if (!event.target)
        {
          return
        }

        if (event.target.href === "#")
        {
          event.preventDefault()
        }
      })
      return a
    })(),
    __worldChipAuthorIconElement: (() =>
    {
      const i = document.createElement("i")
      i.classList.add("fa-solid", "fa-circle-user", "fa-fw", "text-muted")
      return i
    })(),
    __worldChipAuthorElement: (() =>
    {
      const div = document.createElement("div")
      return div
    })(),
    __worldChipBaseElement: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("d-flex", "flex-column", "align-items-start", "flex-md-row", "align-items-md-center")
      return div
    })(),
    __worldChipTitleLinkElement: (() =>
    {
      const a = document.createElement("a")
      a.href = "#"
      a.classList.add("text-decoration-none")
      a.target = "_blank"
      a.referrerPolicy = "no-referrer"
      a.relList.add("nofollow", "noreferrer", "noopener")
      a.addEventListener("click", event =>
      {
        if (!event)
        {
          return
        }

        if (!event.target)
        {
          return
        }

        if (event.target.href === "#")
        {
          event.preventDefault()
        }
      })
      return a
    })(),
    __worldChipTitleElement: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("h5", "border-bottom", "pb-2")
      return div
    })(),
    __worldChipInfoElement: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("flex-sm-grow-1", "mt-2", "mt-sm-0", "ms-sm-2")
      return div
    })(),
    __worldChipThumbnailElement: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("flex-sm-shrink-0")
      return div
    })(),
    __worldChipElement: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("d-sm-flex")
      return div
    })(),

    __initializedWorldChip: false,
    initializeWorldChip: function()
    {
      this.__thumbnailLinkElement.append(this.__thumbnailImageThumbnailElement)

      this.__thumbnailModalInstance = new bootstrap.Modal("#lightbox-modal")
      this.__thumbnailLinkElement.addEventListener("click", (event) =>
      {
        event.preventDefault()

        if (event && event.target)
        {
          if (event.target.href === "#")
          {
            return
          }

          const href = new URL(event.target.href)
          if (href.hostname === "www.dummyimage.com")
          {
            return
          }
        }

        this.__thumbnailModalInstance.show()
      })

      // this.__thumbnailImageModalTemplateElement.append(this.__thumbnailImageModalElement)
      // this.__thumbnailImageModalElement.append(this.__thumbnailImageImageElement)

      // const lightboxModalContents = document.getElementById("lightbox-modal-contents")
      // lightboxModalContents.append(this.__thumbnailImageImageElement)

      // // console.log("__thumbnailImageImageElement", this.__thumbnailImageImageElement, this.__thumbnailImageImageElement.innerHTML)
      // // console.log("__thumbnailImageThumbnailElement", this.__thumbnailImageThumbnailElement, this.__thumbnailImageThumbnailElement.innerHTML)
      // document.body.append(this.__thumbnailImageModalTemplateElement)
      // window.__thumbnailLightboxInstance = this.__thumbnailLightboxInstance = basicLightbox.create(this.__thumbnailImageModalTemplateElement)
      // // window.__thumbnailImageImageElement = this.__thumbnailImageImageElement
      // this.__thumbnailLinkElement.addEventListener("click", (event) =>
      // {
      //   event.preventDefault()
      //   if (!this.imageUrl)
      //   {
      //     return
      //   }

      //   this.__thumbnailLightboxInstance.show()
      // })
      // // this.__thumbnailLightbox = new SimpleLightbox({ elements: [ this.__thumbnailLinkElement ]})
      // // this.__thumbnailLightbox = new SimpleLightbox({ elements: document.querySelectorAll(".world-thumbnail a") })
      // this.__thumbnailLinkElement.addEventListener("click", (event) =>
      // {
      //   event.preventDefault()
      //   this.__thumbnailLightbox = SimpleLightbox.open({elements: '.imageGallery1 a'});
      // })
      this.__thumbnailImageElement.append(this.__thumbnailLinkElement)
      this.__thumbnailYoutubeElement.append(this.__frameYoutubeElement)
      if (window.FontAwesome)
      {
        const icon = FontAwesome.icon({ prefix: "fas", iconName: "users-rectangle" })
        for (const node of icon.node)
        {
          node.classList.add("fa-fw", "text-muted")
          this.__worldChipCapacityElement.append(node)
        }
      }
      else
      {
        this.__worldChipCapacityElement.append(this.__worldChipCapacityIconElement)
      }
      this.__worldChipCapacityElement.append(this.__worldChipCapacityRecommendedElement)
      this.__worldChipCapacityElement.append(this.__worldChipCapacityDividerElement)
      this.__worldChipCapacityElement.append(this.__worldChipCapacityMaximumElement)

      this.__worldChipCapacityTooltipElement.append("Recommended: ")
      this.__worldChipCapacityTooltipElement.append(this.__worldChipCapacityRecommendedTooltipElement)
      this.__worldChipCapacityTooltipElement.append(document.createElement("br"))
      this.__worldChipCapacityTooltipElement.append("Maximum: ")
      this.__worldChipCapacityTooltipElement.append(this.__worldChipCapacityMaximumTooltipElement)

      this.__worldChipCapacityTooltip = new bootstrap.Tooltip(this.__worldChipCapacityElement,
      {
        title: this.__worldChipCapacityTooltipElement,
        html: true,
        customClass: "capacity-tooltip",
      })

      if (window.FontAwesome)
      {
        const icon = FontAwesome.icon({ prefix: "fas", iconName: "circle-user" })
        for (const node of icon.node)
        {
          node.classList.add("fa-fw", "text-muted")
          this.__worldChipAuthorElement.append(node)
        }
      }
      else
      {
        this.__worldChipAuthorElement.append(this.__worldChipAuthorIconElement)
      }
      this.__worldChipAuthorElement.append(this.__worldChipAuthorLinkElement)
      this.__worldChipBaseElement.append(this.__worldChipAuthorElement)
      this.__worldChipBaseElement.append(this.__worldChipCapacityElement)
      this.__worldChipInfoElement.append(this.__worldChipTitleElement)
      this.__worldChipInfoElement.append(this.__worldChipBaseElement)
      this.__worldChipInfoElement.append(this.__worldChipDescriptionElement)
      this.__worldChipTitleElement.append(this.__worldChipTitleLinkElement)
      this.__worldChipElement.append(this.__worldChipThumbnailElement)
      this.__worldChipElement.append(this.__worldChipInfoElement)
    },

    get worldChip()
    {
      if (!this.__initializedWorldChip)
      {
        this.initializeWorldChip()
        this.__initializedWorldChip = true
      }

      // this.__thumbnailImageImageElement.src = this.imageUrl || "https://www.dummyimage.com/300x200/bbb/444.png&text=No thumbnail"
      // this.__thumbnailImageImageElement.alt = this.imageUrl ? "Thumbnail of " + this.title : "No thumbnail for " + this.title
      if (this.previewYoutubeId)
      {
        this.thumbnailImage.remove()
        this.__worldChipThumbnailElement.append(this.thumbnailYoutube)
      }
      else
      {
        this.thumbnailYoutube.remove()
        this.__worldChipThumbnailElement.append(this.thumbnailImage)
      }
      if (this.title)
      {
        this.__worldChipTitleLinkElement.textContent = this.title
        this.__worldChipTitleLinkElement.href = instance.infoURL
        this.__worldChipDescriptionElement.classList.remove("fst-italic")
      }
      else
      {
        this.__worldChipTitleLinkElement.textContent = "(No title)"
        this.__worldChipTitleLinkElement.href = instance.__homeURL.toString()
        this.__worldChipDescriptionElement.classList.add("fst-italic")
      }
      if (this.authorName)
      {
        this.__worldChipAuthorLinkElement.textContent = this.authorName
        if (this.authorId)
        {
          this.__worldChipAuthorLinkElement.href = this.authorUrl
        }
        else
        {
          this.__worldChipAuthorLinkElement.href = "#"
        }
        this.__worldChipAuthorElement.classList.remove("d-none")
        this.__worldChipCapacityElement.classList.add("ms-md-4")
      }
      else
      {
        this.__worldChipAuthorLinkElement.textContent = "N/A"
        this.__worldChipAuthorLinkElement.href = "#"
        this.__worldChipAuthorElement.classList.add("d-none")
        this.__worldChipCapacityElement.classList.remove("ms-md-4")
      }
      if (this.recommendedCapacity || this.maximumCapacity)
      {
        this.__worldChipCapacityElement.classList.remove("d-none")
        if (this.recommendedCapacity === this.maximumCapacity)
        {
          this.__worldChipCapacityMaximumElement.classList.add("d-none")
          this.__worldChipCapacityDividerElement.classList.add("d-none")
        }
        else
        {
          this.__worldChipCapacityMaximumElement.classList.remove("d-none")
          this.__worldChipCapacityDividerElement.classList.remove("d-none")
        }
      }
      else
      {
        this.__worldChipCapacityElement.classList.add("d-none")
      }
      this.__worldChipCapacityRecommendedElement.textContent = this.recommendedCapacity || 0
      this.__worldChipCapacityMaximumElement.textContent = this.maximumCapacity || 0
      this.__worldChipCapacityRecommendedTooltipElement.textContent = this.recommendedCapacity || 0
      this.__worldChipCapacityMaximumTooltipElement.textContent = this.maximumCapacity || 0
      if (this.description)
      {
        if (this.description.match(urlRegex))
        {
          this.__worldChipDescriptionElement.innerHTML = this.description
            .replaceAll("<", "&lt;")
            .replaceAll(">", "&gt;")
            .replace(urlRegex, url => '<a href="' + url + '" target="_blank" referrerpolicy="no-referrer" rel="nofollow noreferrer noopener">' + url + "</a>")
        }
        else
        {
          this.__worldChipDescriptionElement.textContent = this.description
        }
        this.__worldChipDescriptionElement.classList.remove("d-none")
      }
      else
      {
        this.__worldChipDescriptionElement.textContent = ""
        this.__worldChipDescriptionElement.classList.add("d-none")
      }

      return this.__worldChipElement
    },

    __launchingTitleNoWorldId: (() =>
    {
      const div = document.createElement("div")
      div.append("Buttons")
      return div
    })(),
    __launchingTitleNoWorld: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("text-secondary")
      div.style.fontSize = ".6em"

      const hidden = document.createElement("span")
      hidden.classList.add("visually-hidden")
      hidden.append("Buttons of ")
      div.append(hidden)

      const launcher = document.createElement("span")
      launcher.append("Launching ")
      div.append(launcher)

      return div
    })(),
    __launchingTitle: (() =>
    {
      const div = document.createElement("div")
      div.classList.add("text-secondary")
      div.style.fontSize = ".6em"
      return div
    })(),
    __launchingTitleFirstLine: (() =>
    {
      const div = document.createElement("div")
      // const div = document.createElement("span")
      // div.classList.add("d-block")
      return div
    })(),
    __launchingTitleFirstLinePrefixPart1: (() =>
    {
      const hidden = document.createElement("span")
      hidden.classList.add("visually-hidden")
      hidden.append("Buttons of ")
      return hidden
    })(),
    __launchingTitleFirstLinePrefixPart2: (() =>
    {
      const prefix = document.createElement("span")
      prefix.append("Launching ")
      return prefix
    })(),
    __launchingTitleFirstLineFlag: (() =>
    {
      const flag = document.createElement("span")
      flag.classList.add("fi", "fis", "fis-rounded", "fi-us")
      return flag
    })(),
    __launchingTitleFirstLineFlagText: (() =>
    {
      const span = document.createElement("span")
      span.classList.add("visually-hidden")
      return span
    })(),
    __launchingTitleFirstLineSuffix: (() =>
    {
      const suffix = document.createElement("span")
      // suffix.style.whiteSpace = "pre"
      suffix.append(" of ")
      return suffix
    })(),
    __launchingTitleSecondLine: (() =>
    {
      const div = document.createElement("div")
      // const div = document.createElement("span")
      // div.classList.add("d-block")
      div.style.fontSize = "1.1em"
      return div
    })(),
    __launchingTitleSecondLineAuthor: (() =>
    {
      const span = document.createElement("span")
      span.append(" by ")
      span.classList.add("small")
      return span
    })(),
    __launchingTitleInstanceElement: (() =>
    {
      const span = document.createElement("span")
      span.classList.add("fw-bold")
      span.style.fontSize = "1.15em"
      return span
    })(),
    __launchingTitleNameElement: (() =>
    {
      const span = document.createElement("span")
      span.classList.add("fw-bold")
      return span
    })(),
    __launchingTitleAuthorNameElement: (() =>
    {
      const span = document.createElement("span")
      return span
    })(),

    __initializedLaunchingChip: false,
    initializeLaunchingChip: function()
    {
      this.__launchingTitleNoWorld.append(this.__launchingTitleInstanceElement)

      this.__launchingTitleFirstLine.append(this.__launchingTitleFirstLinePrefixPart1)
      this.__launchingTitleFirstLine.append(this.__launchingTitleFirstLinePrefixPart2)
      this.__launchingTitleFirstLineFlag.append(this.__launchingTitleFirstLineFlagText)
      this.__launchingTitleSecondLineAuthor.append(this.__launchingTitleAuthorNameElement)

      this.__launchingTitle.append(this.__launchingTitleFirstLine)
      this.__launchingTitle.append(this.__launchingTitleSecondLine)

      const launchingTitle = document.getElementById("launching-title")
      launchingTitle.textContent = ""
    },
    get launchingChip()
    {
      if (!this.__initializedLaunchingChip)
      {
        this.initializeLaunchingChip()
        this.__initializedLaunchingChip = true
      }

      this.__launchingTitleNoWorldId.remove()
      this.__launchingTitleNoWorld.remove()
      this.__launchingTitle.remove()

      if (instance.instanceReadableType)
      {
        this.__launchingTitleInstanceElement.textContent = instance.instanceReadableType
      }

      if (!this.data)
      {
        if (!instance.worldId)
        {
          return this.__launchingTitleNoWorldId
        }

        this.__launchingTitleNoWorld.append(this.__launchingTitleInstanceElement)
        return this.__launchingTitleNoWorld
      }

      this.__launchingTitleNameElement.textContent = this.title
      this.__launchingTitleAuthorNameElement.textContent = this.authorName

      this.__launchingTitleFirstLine.append(this.__launchingTitleInstanceElement)
      switch (instance.region)
      {
      case "use":
      case "usw":
        this.__launchingTitleFirstLineFlag.classList.remove("fi-eu", "fi-jp")
        this.__launchingTitleFirstLineFlag.classList.add("fi-us")
        break;
      case "eu":
        this.__launchingTitleFirstLineFlag.classList.remove("fi-us", "fi-jp")
        this.__launchingTitleFirstLineFlag.classList.add("fi-eu")
        break;
      case "jp":
        this.__launchingTitleFirstLineFlag.classList.remove("fi-us", "fi-eu")
        this.__launchingTitleFirstLineFlag.classList.add("fi-jp")
        break;
      }
      this.__launchingTitleFirstLineFlag.title = instance.readableRegionLong
      this.__launchingTitleFirstLineFlagText.textContent = "(" + instance.readableRegionShort + ")"
      this.__launchingTitleFirstLine.append(" ")
      this.__launchingTitleFirstLine.append(this.__launchingTitleFirstLineFlag)
      this.__launchingTitleFirstLine.append(this.__launchingTitleFirstLineSuffix)

      this.__launchingTitleSecondLine.append(this.__launchingTitleNameElement)
      this.__launchingTitleSecondLine.append(this.__launchingTitleSecondLineAuthor)

      return this.__launchingTitle
    },

    get launchingTitle()
    {
      if (!this.data)
      {
        if (!instance.worldId)
        {
          return "Launching VRChat..."
        }

        return "Launching " + instance.instanceReadableType + " (" + instance.readableRegionShort + ")"
      }

      this.__launchingTitleNameElement.textContent = this.title
      this.__launchingTitleAuthorNameElement.textContent = this.authorName

      return "Launching " + instance.instanceReadableType + " (" + instance.readableRegionShort + ") of " + this.title + " by " + this.authorName
    }

  }

  // From https://github.com/silentroach/twitter-regexps
  const urlRegex = /((?<=(?:[^\d#$@a-z\uFEFFï¼ï¼ \uFFFE\uFFFF]|[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]|^))((https?:\/\/)?((?:(?:(?:[^\x09-\x0D !#$%&'()*+,.//:;<=>?@[\\\]^_{|}~\x85\xA0\u061C\u1680\u180E\u2000-\u200A\u200E\u200F\u2028\u2029-\u202F\u205F\u2066-\u2069\u3000\uFEFF\uFFFE\uFFFF\-](?:[_-]|[^\x09-\x0D !#$%&'()*+,.//:;<=>?@[\\\]^_{|}~\x85\xA0\u061C\u1680\u180E\u2000-\u200A\u200E\u200F\u2028\u2029-\u202F\u205F\u2066-\u2069\u3000\uFEFF\uFFFE\uFFFF\-])*)?[^\x09-\x0D !#$%&'()*+,.//:;<=>?@[\\\]^_{|}~\x85\xA0\u061C\u1680\u180E\u2000-\u200A\u200E\u200F\u2028\u2029-\u202F\u205F\u2066-\u2069\u3000\uFEFF\uFFFE\uFFFF\-]\.)*(?:[^\x09-\x0D !#$%&'()*+,.//:;<=>?@[\\\]^_{|}~\x85\xA0\u061C\u1680\u180E\u2000-\u200A\u200E\u200F\u2028\u2029-\u202F\u205F\u2066-\u2069\u3000\uFEFF\uFFFE\uFFFF\-](?:-|[^\x09-\x0D !#$%&'()*+,.//:;<=>?@[\\\]^_{|}~\x85\xA0\u061C\u1680\u180E\u2000-\u200A\u200E\u200F\u2028\u2029-\u202F\u205F\u2066-\u2069\u3000\uFEFF\uFFFE\uFFFF\-])*)?[^\x09-\x0D !#$%&'()*+,.//:;<=>?@[\\\]^_{|}~\x85\xA0\u061C\u1680\u180E\u2000-\u200A\u200E\u200F\u2028\u2029-\u202F\u205F\u2066-\u2069\u3000\uFEFF\uFFFE\uFFFF\-]\.(?:(?:(?:ì¼ì±|ë·ì»´|ë·ë·|é¦æ ¼éæ|é¤å|é£å|é£å©æµ¦|é»è¨çç§|éå¢|éè²©|è´­ç©|è°·æ­|è¯ºåºäº|èé|ç½ç»|ç½ç«|ç½åº|ç½å|ç»ç»æºæ|ç§»å¨|ç å®|ç¹ç|æ¸¸æ|æ·¡é©¬é¡|æºæ|æ¸ç±|æ¶å°|æ°é»|æ¿åº|æ¿å¡|æè|æè¡¨|ææº|æç±ä½ |æå|å¾®å|å¹¿ä¸|å·¥è¡|å®¶é»|å¨±ä¹|å¤©ä¸»æ|å¤§æ¿|å¤§ä¼æ±½è½¦|å¨çº¿|åéå¤§éåº|åé|åæ |ååº|åå|å¬ç|å¬å¸|å«å¦|å¥åº·|ä¿¡æ¯|ä½å±±|ä¼ä¸|ä¸­æç½|ä¸­ä¿¡|ä¸ç|ãã¤ã³ã|ãã¡ãã·ã§ã³|ã»ã¼ã«|ã¹ãã¢|ã³ã |ã°ã¼ã°ã«|ã¯ã©ã¦ã|ã¿ããª|à¸à¸­à¸¡|à¤¸à¤à¤à¤ à¤¨|à¤¨à¥à¤|à¤à¥à¤®|ÙÙØ±Ø§Ù|ÙÙÙØ¹|ÙÙØ¨Ø§ÙÙÙ|ÙÙÙ|ÙØ§Ø«ÙÙÙÙ|Ø¹Ø±Ø¨|Ø´Ø¨ÙØ©|Ø¨ÙØªÙ|Ø¨Ø§Ø²Ø§Ø±|Ø§ÙØ¹ÙÙØ§Ù|Ø§Ø±Ø§ÙÙÙ|Ø§ØªØµØ§ÙØ§Øª|Ø§Ø¨ÙØ¸Ø¨Ù|×§××|ÑÐ°Ð¹Ñ|ÑÑÑ|Ð¾ÑÐ³|Ð¾Ð½Ð»Ð°Ð¹Ð½|Ð¼Ð¾ÑÐºÐ²Ð°|ÐºÐ¾Ð¼|ÐºÐ°ÑÐ¾Ð»Ð¸Ðº|Ð´ÐµÑÐ¸|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermÃ¶gensberatung|vermÃ¶gensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rugby|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|llp|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|grocery|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|gay|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|etisalat|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|charity|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|arab|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|africa|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^\d+@a-z-]|$))|(?:(?:íêµ­|é¦æ¸¯|æ¾³é|æ°å å¡|å°ç£|å°æ¹¾|ä¸­å|ä¸­å½|áá|àº¥àº²àº§|à¹à¸à¸¢|à¶½à¶à¶à·|à´­à´¾à´°à´¤à´|à²­à²¾à²°à²¤|à°­à°¾à°°à°¤à±|à®à®¿à®à¯à®à®ªà¯à®ªà¯à®°à¯|à®à®²à®à¯à®à¯|à®à®¨à¯à®¤à®¿à®¯à®¾|à¬­à¬¾à¬°à¬¤|àª­àª¾àª°àª¤|à¨­à¨¾à¨°à¨¤|à¦­à¦¾à§°à¦¤|à¦­à¦¾à¦°à¦¤|à¦¬à¦¾à¦à¦²à¦¾|à¤­à¤¾à¤°à¥à¤¤|à¤­à¤¾à¤°à¤¤à¤®à¥|à¤­à¤¾à¤°à¤¤|ÚØ§Ø±Øª|Ù¾Ø§Ú©Ø³ØªØ§Ù|ÙÙØ±ÙØªØ§ÙÙØ§|ÙÙÙØ³ÙØ§|ÙØµØ±|ÙØ·Ø±|ÙÙØ³Ø·ÙÙ|Ø¹ÙØ§Ù|Ø¹Ø±Ø§Ù|Ø³ÙØ±ÙØ©|Ø³ÙØ¯Ø§Ù|ØªÙÙØ³|Ø¨Ú¾Ø§Ø±Øª|Ø¨Ø§Ø±Øª|Ø§ÛØ±Ø§Ù|Ø§ÙØ§Ø±Ø§Øª|Ø§ÙÙØºØ±Ø¨|Ø§ÙØ³Ø¹ÙØ¯ÙØ©|Ø§ÙØ¬Ø²Ø§Ø¦Ø±|Ø§ÙØ¨Ø­Ø±ÙÙ|Ø§ÙØ§Ø±Ø¯Ù|Õ°Õ¡Õµ|ÒÐ°Ð·|ÑÐºÑ|ÑÑÐ±|ÑÑ|Ð¼Ð¾Ð½|Ð¼ÐºÐ´|ÐµÑ|Ð±ÐµÐ»|Ð±Ð³|ÎµÏ|ÎµÎ»|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^\d+@a-z-]|$))|(?:xn--[\da-z\-]+))))(?::(\d+))?(\/(?:(?:[\w!#$%&'*+,./:;=@[\]|~\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\u2013\-]*(?:\((?:[\w!#$%&'*+,./:;=@[\]|~\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\u2013\-]+|(?:[\w!#$%&'*+,./:;=@[\]|~\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\u2013\-]*\([\w!#$%&'*+,./:;=@[\]|~\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\u2013\-]+\)[\w!#$%&'*+,./:;=@[\]|~\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\u2013\-]*))\)[\w!#$%&'*+,./:;=@[\]|~\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\u2013\-]*)*[\w#+/=\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\-]|(?:\((?:[\w!#$%&'*+,./:;=@[\]|~\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\u2013\-]+|(?:[\w!#$%&'*+,./:;=@[\]|~\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\u2013\-]*\([\w!#$%&'*+,./:;=@[\]|~\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\u2013\-]+\)[\w!#$%&'*+,./:;=@[\]|~\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\u2013\-]*))\)))|(?:@[\w!#$%&'*+,./:;=@[\]|~\xC0-\xD6\xD8-\xF6\xF8-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u0400-\u04FF\u1E00-\u1EFF\u2013\-]+\/))*)?(\?[\w!#$%&'()*+,./:;=?@[\]|~\-]*[\w#&/=\-])?))/gi
  // const urlRegex = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig

  const generateWorldLink = data =>
  {
    console.log("GENERATING LINK")
    console.log("===============")

    if (data.worldId && data.worldId.trim)
    {
      instance.worldId = data.worldId.trim()
      if (instance.worldId.match(/\/info$/))
      {
        instance.worldId = instance.worldId.replace(/\/info$/, "")
      }
    }
    if (data.instanceNumber && data.instanceNumber.trim)
    {
      instance.instanceNumber = data.instanceNumber.trim()
    }
    if (data.instanceType && data.instanceType.trim)
    {
      instance.instanceType = data.instanceType.trim()
    }
    if (data.instanceOwner && data.instanceOwner.trim)
    {
      instance.instanceOwner = data.instanceOwner.trim()
    }
    if (data.region && data.region.trim)
    {
      instance.region = data.region.trim()
    }

    if (!instance.worldId)
    {
        // throw new Error("No World Id")
        console.error("No World Id")
        return
    }

    // if (!_instanceType)
    // {
    //     // throw new Error("No instanceType")
    //     console.error("No instanceType")
    //     return
    // }

    // console.log(instance)
    // if (!instance.instanceOwner && instance.instanceAPIType !== "public")
    // {
    //     // throw new Error("No instanceOwner")
    //     console.error("No instanceOwner for non-public instance")
    //     return
    // }

    "public"
    "friends" // Friend+
    "hidden" // Friend Only
    "private" // Invite+ / Invite Only

    // const region = "jp" // "us" / "use" / "eu" / "jp"

    console.log("worldID = " + instance.worldId)
    console.log("instanceOwner = " + instance.instanceOwner) // Group ID if creating for Group Instance or Group+ Instance
    console.log("instanceType = " + instance.instanceAPIType)
    console.log("instanceNumber = " + instance.instanceNumber)

    //Output Final Link
    console.log("Launch Game Link", instance.gameLink)
    console.log("Web Link", instance.webURL)

    //Get System's fancy new short URL link
    // loadXMLDoc(weblink + "/shortName")
    // console.log(weblink + "/shortName")

    // document.addEventListener("DOMContentLoaded", () =>
    // {

    //   setFormInput()
    //   updateLink()
    // })

    // return instance.webURL.toString()
  }

  const setDebugInput = () =>
  {

    const worldidBox = document.getElementById("worldid-box")
    if (worldidBox)
    {
      worldidBox.value = instance.worldId || ""

      worldidBox.selectionStart = 0
      worldidBox.selectionEnd = worldidBox.value.length
    }

    const instancenumberBox = document.getElementById("instancenumber-box")
    if (instancenumberBox)
    {
      instancenumberBox.value = instance.instanceNumber
      const instancenumberText = document.getElementById("instancenumber-text")
      if (instancenumberText)
      {
        instancenumberText.innerHTML = this._isInstanceNumberSpecified ? "(Specified)" : ""
      }
    }

    const instancetypeBox = document.getElementById("instancetype-box")
    if (instancetypeBox)
    {
      instancetypeBox.value = instance.instanceAPIType

      instancetypeBox.selectionStart = 0
      instancetypeBox.selectionEnd = instancetypeBox.value.length
    }

    if (instance.instanceAPIType !== "public")
    {
      const instanceidBox = document.getElementById("instanceid-box")
      if (instanceidBox)
      {
        instanceidBox.value = instance.instanceOwner || ""

        instanceidBox.selectionStart = 0
        instanceidBox.selectionEnd = instanceidBox.value.length
      }
    }

    const regionBox = document.getElementById("region-box")
    if (regionBox)
    {
      regionBox.value = instance.region || "us"

      regionBox.selectionStart = 0
      regionBox.selectionEnd = regionBox.value.length
    }

    if (instance.instanceAPIType !== "public")
    {
      const nonceBox = document.getElementById("nonce-box")
      if (nonceBox)
      {
        nonceBox.value = instance.nonce
        const nonceText = document.getElementById("nonce-text")
        if (nonceText)
        {
          nonceText.innerHTML = instance._isNonceReused ? "(Reused)" : ""

        }

        nonceBox.selectionStart = 0
        nonceBox.selectionEnd = nonceBox.value.length
      }
    }

  }

  const setFormInput = () =>
  {

    const worldidInput = document.getElementById("worldid-input")
    if (worldidInput)
    {
      worldidInput.value = instance.worldId || ""

      // worldidInput.selectionStart = 0
      // worldidInput.selectionEnd = worldidInput.value.length
    }

    const instancenumberInput = document.getElementById("instancenumber-input")
    if (instancenumberInput)
    {
      instancenumberInput.value = instance.instanceNumber
    }

    for (const instancetypeInput of document.querySelectorAll(".instancetype-input"))
    {
      const options = Array.from(instancetypeInput.options).map(option => option.value)
      instancetypeInput.selectedIndex = options.indexOf(instance.instanceType)

      // instancetypeInput.selectionStart = 0
      // instancetypeInput.selectionEnd = instancetypeInput.value.length
    }
    if (instance.instanceAPIType !== "public")
    {
      const instanceidInput = document.getElementById("instanceid-input")
      if (instanceidInput)
      {
        instanceidInput.value = instance.instanceOwner || ""

        // instanceidInput.selectionStart = 0
        // instanceidInput.selectionEnd = instanceidInput.value.length
      }
    }

    const regionInput = document.getElementById("region-input")
    if (regionInput)
    {
      const options = Array.from(regionInput.options).map(option => option.value)
      regionInput.selectedIndex = options.indexOf(instance.region || "us")

      // regionInput.selectionStart = 0
      // regionInput.selectionEnd = regionInput.value.length
    }

    if (instance.instanceAPIType !== "public")
    {
      const nonceInput = document.getElementById("nonce-input")
      if (nonceInput)
      {
        nonceInput.value = instance.nonce

        // nonceInput.selectionStart = 0
        // nonceInput.selectionEnd = nonceInput.value.length
      }
    }

    const removeTracesInput = document.getElementById("remove-traces-from-chip")
    if (removeTracesInput)
    {
      removeTracesInput.checked = !!instance.removeTraces
    }

    for (const forceRegenerateInput of document.querySelectorAll(".force-regenerate-randoms"))
    {
      forceRegenerateInput.checked = !!instance.forceRegenerateRandoms
    }

  }

  const _parserInputProcess = async (url, element) =>
  {
    if (url.match(/^https?:\/\/t\.co/))
    {
      // const _url = new URL(url)
      const response = await fetch(url)
      const html = await response.text()
      const dom = new DOMParser().parseFromString(html, "text/html")
      const title = dom.querySelector("title")
      url = title.textContent

      // parserInputs = document.querySelectorAll(".parser-input")
      // for (const parserInput of parserInputs)
      // {
      //   parserInput.value = title.textContent
      // }
      if (element)
      {
        element.value = title.textContent
      }
    }

    const {
      worldId,
      instanceNumber,
      instanceType,
      instanceOwner,
      region,
      nonce,
    } = getDataFromUrl(url)

    let anyUpdated = false

    let isInstanceNumberAlreadyChanged = false
    let isNonceAlreadyChanged = false

    if (worldId)
    {
      if (instance.worldId !== worldId)
      {
        instance.worldId = worldId
        world.worldId = worldId
        const worldidInput = document.getElementById("worldid-input")
        if (worldidInput)
        {
          worldidInput.value = worldId
        }
        anyUpdated = true
      }
    }
    if (instanceNumber)
    {
      if (instance._instanceNumber !== instanceNumber)
      {
        instance.instanceNumber = instanceNumber
        const instancenumberInput = document.getElementById("instancenumber-input")
        if (instancenumberInput)
        {
          instancenumberInput.value = instanceNumber
        }
        isInstanceNumberAlreadyChanged = true
        anyUpdated = true
      }
    }
    if (instanceType)
    {
      if (instance._instanceType !== instanceType)
      {
        instance.instanceType = instanceType

        for (const instancetypeInput of document.querySelectorAll(".instancetype-input"))
        {
          const options = Array.from(instancetypeInput.options).map(option => option.value)
          instancetypeInput.selectedIndex = options.indexOf(instanceType)
        }
        anyUpdated = true
      }
    }
    if (instanceOwner)
    {
      if (instance._instanceOwner !== instanceOwner)
      {
        instance.instanceOwner = instanceOwner
        const instanceidInput = document.getElementById("instanceid-input")
        if (instanceidInput)
        {
          instanceidInput.value = instanceOwner
        }
        anyUpdated = true
      }
    }
    if (region)
    {
      if (instance._region !== region)
      {
        instance.region = region

        const regionInput = document.getElementById("region-input")
        if (regionInput)
        {
          const options = Array.from(regionInput.options).map(option => option.value)
          regionInput.selectedIndex = options.indexOf(region)
        }
        anyUpdated = true
      }
    }
    if (nonce)
    {
      if (instance._nonce !== nonce)
      {
        instance.nonce = nonce
        const nonceInput = document.getElementById("nonce-input")
        if (nonceInput)
        {
          nonceInput.value = nonce
        }
        isNonceAlreadyChanged = true
        anyUpdated = true
      }
    }

    if (!instanceNumber && anyUpdated)
    {
      // If current instance number isGenerated, regenerate once
      if (instance._isInstanceNumberGenerated)
      {
        regenerateInstaceNumber()
        isInstanceNumberAlreadyChanged = true
        const instancenumberInput = document.getElementById("instancenumber-input")
        if (instancenumberInput)
        {
          instancenumberInput.value = instance.instanceNumber
        }
      }
    }

    if (!nonce && anyUpdated)
    {
      // If current nonce isGenerated, regenerate NONCE once
      if (instance._isNonceGenerated)
      {
        regenerateNonce()
        isNonceAlreadyChanged = true
        const nonceInput = document.getElementById("nonce-input")
        if (nonceInput)
        {
          nonceInput.value = instance.nonce
        }
      }
    }

    if (instance.forceRegenerateRandoms)
    {
      if (!isInstanceNumberAlreadyChanged)
      {
        regenerateInstaceNumber()
        isInstanceNumberAlreadyChanged = true
        const instancenumberInput = document.getElementById("instancenumber-input")
        if (instancenumberInput)
        {
          instancenumberInput.value = instance.instanceNumber
        }
      }

      if (!isNonceAlreadyChanged)
      {
        regenerateNonce()
        isNonceAlreadyChanged = true
        const nonceInput = document.getElementById("nonce-input")
        if (nonceInput)
        {
          nonceInput.value = instance.nonce
        }
      }
    }

    if (anyUpdated)
    {
      updateLink()
      setFormInput()
      setDebugInput()
      if (worldId)
      {
        updateWorld()
      }
      else
      {
        updateTextChip()
        updateLauncher()
      }
    }
  }
  const _worldidInputProcess = worldId =>
  {
    worldId = worldId.trim()
    if (worldId.match(/\/info$/))
    {
      worldId = worldId.replace(/\/info$/, "")
    }

    if (!worldId.match(/^wrld_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
    {
      return
    }

    if (instance.worldId === worldId)
    {
      return
    }

    instance.worldId = worldId
    world.worldId = worldId

    // If current nonce isGenerated, regenerate NONCE once
    if (instance._isNonceGenerated)
    {
      regenerateNonce()
    }

    updateLink()
    updateWorld()
    setDebugInput()
  }
  const _instancenumberInputProcess = instanceNumber =>
  {
    instanceNumber = instanceNumber.trim()
    if (instanceNumber.match(/[^A-Za-z0-9]/))
    {
      return
    }

    if (instance._instanceNumber === instanceNumber)
    {
      return
    }

    instance.instanceNumber = instanceNumber

    // If current nonce isGenerated, regenerate NONCE once
    if (instance._isNonceGenerated)
    {
      regenerateNonce()
    }

    updateLink()
    updateTextChip()
    updateLauncher()
    setDebugInput()

    if (!instanceNumber)
    {
      instancenumberInput.value = instance.instanceNumber
    }
  }
  const _instancetypeInputProcess = instancetypeInput =>
  {
    const options = Array.from(instancetypeInput.options).map(option => option.value)
    const instanceType = options[instancetypeInput.selectedIndex]

    if ([
      "friend+", "friend-plus", "friends+", "friends-plus",
      "friend", "friends", "friend-only", "friends-only",
      "invite+", "invite-plus", "invite", "invite-only",
      "group-public", "group+", "group-plus",
      "group", "group-only", "group-member",
      "group-member-only", "group-members", "group-members-only",
      "public",
    ].indexOf(instanceType) < 0)
    {
      return
    }

    if (instance._instanceType === instanceType)
    {
      return
    }

    instance.instanceType = instanceType
    instance.defaultInstanceType = instanceType

    for (const instancetypeInput of document.querySelectorAll(".instancetype-input"))
    {
      const options = Array.from(instancetypeInput.options).map(option => option.value)
      instancetypeInput.selectedIndex = options.indexOf(instance.instanceType)
    }

    // If current nonce isGenerated, regenerate NONCE once
    if (instance._isNonceGenerated)
    {
      regenerateNonce()
    }

    if (instanceType !== "public" && instance.instanceOwner)
    {
      const instanceidInput = document.getElementById("instanceid-input")
      if (instanceidInput)
      {
        if (instanceidInput.value !== instance.instanceOwner)
        {
          instanceidInput.value = instance.instanceOwner
        }
      }
    }

    updateLink()
    updateTextChip()
    updateLauncher()
    setDebugInput()
  }
  const _instanceidInputProcess = instanceOwner =>
  {
    instanceOwner = instanceOwner.trim()
    if (instanceOwner !== ""
        &&
        !instanceOwner.match(/^usr_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/)
        &&
        !instanceOwner.match(/^grp_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
    {
      return
    }

    if (instance._instanceOwner === instanceOwner)
    {
      return
    }

    instance.instanceOwner = instanceOwner
    instance.defaultInstanceOwner = instanceOwner

    // If current nonce isGenerated, regenerate NONCE once
    if (instance._isNonceGenerated)
    {
      regenerateNonce()
    }

    updateLink()
    updateTextChip()
    updateLauncher()
    setDebugInput()
  }
  const _regionInputProcess = regionInput =>
  {
    const options = Array.from(regionInput.options).map(option => option.value)
    const region = options[regionInput.selectedIndex]

    if ([
      "usw", "use", "eu", "jp",
    ].indexOf(region) < 0)
    {
      return
    }

    if (instance._region === region)
    {
      return
    }

    instance.region = region
    instance.defaultRegion = region

    // If current nonce isGenerated, regenerate NONCE once
    if (instance._isNonceGenerated)
    {
      regenerateNonce()
    }

    updateLink()
    updateTextChip()
    updateLauncher()
    setDebugInput()
  }
  const _nonceInputProcess = nonce =>
  {
    nonce = nonce.trim()
    if (nonce !== "" && !nonce.match(/^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
    {
      return
    }

    if (instance._nonce === nonce)
    {
      return
    }

    instance.nonce = nonce
    updateLink()
    updateTextChip()
    updateLauncher()
    setDebugInput()

    if (!nonce)
    {
      nonceInput.value = instance.nonce
    }
  }
  const initializeForms = () =>
  {

    for (const _input of document.querySelectorAll(".debug-info-text"))
    {
      _input.addEventListener("blur", () =>
      {
        _input.selectionStart = 0
        _input.selectionEnd = _input.value.length
      })
    }

    for (const _input of document.querySelectorAll(".manual-input-text"))
    {
      _input.addEventListener("focus", () =>
      {
        _input.selectionStart = 0
        _input.selectionEnd = _input.value.length
      })
    }

    const parserInputs = document.querySelectorAll(".parser-input")
    for (const parserInput of parserInputs)
    {
      parserInput.addEventListener("change", () => void _parserInputProcess(parserInput.value, parserInput) )
      parserInput.addEventListener("paste", (event) => void _parserInputProcess(event.clipboardData.getData("text"), parserInput) )
    }

    const worldidInput = document.getElementById("worldid-input")
    if (worldidInput)
    {
      worldidInput.addEventListener("change", () => void _worldidInputProcess(worldidInput.value) )
      worldidInput.addEventListener("paste", (event) => void _worldidInputProcess(event.clipboardData.getData("text")) )
    }
    const instancenumberInput = document.getElementById("instancenumber-input")
    if (instancenumberInput)
    {
      instancenumberInput.addEventListener("change", () => void _instancenumberInputProcess(instancenumberInput.value) )
      instancenumberInput.addEventListener("paste", (event) => void _instancenumberInputProcess(event.clipboardData.getData("text")) )
    }
    for (const instancetypeInput of document.querySelectorAll(".instancetype-input"))
    {
      instancetypeInput.addEventListener("change", () => void _instancetypeInputProcess(instancetypeInput) )
    }
    const instanceidInput = document.getElementById("instanceid-input")
    if (instanceidInput)
    {
      instanceidInput.addEventListener("change", () => void _instanceidInputProcess(instanceidInput.value) )
      instanceidInput.addEventListener("paste", (event) => void _instanceidInputProcess(event.clipboardData.getData("text")) )
    }
    const regionInput = document.getElementById("region-input")
    if (regionInput)
    {
      regionInput.addEventListener("change", () => void _regionInputProcess(regionInput) )
    }
    const nonceInput = document.getElementById("nonce-input")
    if (nonceInput)
    {
      nonceInput.addEventListener("change", () => void _nonceInputProcess(nonceInput.value) )
      nonceInput.addEventListener("paste", (event) => void _nonceInputProcess(event.clipboardData.getData("text")) )
    }

    for (const textChip of document.querySelectorAll(".textchip-textarea"))
    {
      textChip.addEventListener("change", () => { textChip.dataset.modified = "true" })
      textChip.addEventListener("paste", () => { textChip.dataset.modified = "true" })
      textChip.addEventListener("focus", () =>
      {
        if (textChip.dataset.modified === "false")
        {
          textChip.selectionStart = 0
          textChip.selectionEnd = textChip.value.length
        }
      })
    }

    const removeTracesInput = document.getElementById("remove-traces-from-chip")
    if (removeTracesInput)
    {
      removeTracesInput.addEventListener("change", () =>
      {
        instance.removeTraces = removeTracesInput.checked
        updateDiscordChip()
      })
    }

    for (const forceRegenerateInput of document.querySelectorAll(".force-regenerate-randoms"))
    {
      forceRegenerateInput.addEventListener("change", () =>
      {
        instance.forceRegenerateRandoms = forceRegenerateInput.checked

        for (const _forceRegenerateInput of document.querySelectorAll(".force-regenerate-randoms"))
        {
          _forceRegenerateInput.checked = instance.forceRegenerateRandoms
        }

        if (forceRegenerateInput.checked)
        {

          let isChanged = false

          if (!instance._isInstanceNumberGenerated)
          {
            regenerateInstaceNumber()
            isChanged = true
            const instancenumberInput = document.getElementById("instancenumber-input")
            if (instancenumberInput)
            {
              instancenumberInput.value = instance.instanceNumber
            }
          }

          if (!instance._isNonceGenerated)
          {
            regenerateNonce()
            isChanged = true
            const nonceInput = document.getElementById("nonce-input")
            if (nonceInput)
            {
              nonceInput.value = instance.nonce
            }
          }

          if (isChanged)
          {
            updateLink()
            updateTextChip()
            updateLauncher()
            setDebugInput()
          }

        }

      })
    }

  }

  const regenerateInstaceNumber = () =>
  {

    instance.instanceNumber = ""
    instance.instanceNumber + ""

    // If current nonce isGenerated, regenerate NONCE once
    if (instance._isNonceGenerated)
    {
      regenerateNonce()
    }

    const instancenumberInput = document.getElementById("instancenumber-input")
    if (instancenumberInput)
    {
      instancenumberInput.value = instance.instanceNumber
    }

  }

  const regenerateNonce = () =>
  {

    instance.nonce = ""
    instance.nonce + ""
    const nonceInput = document.getElementById("nonce-input")
    if (nonceInput)
    {
      nonceInput.value = instance.nonce
    }

  }

  const initializeCopyButtons = () =>
  {
    // await waitingBootstrap()

    for (const _button of document.querySelectorAll(".copy-button"))
    {
      _button.addEventListener("click", (event) =>
      {
        event.preventDefault()

        const copyTooltip =
        {
          button: _button,
          // copyTarget: undefined,
          // tooltipTarget: undefined,
          // tooltipTimer: undefined,
        }

        const copyTargetSelector = _button.dataset.copyTarget
        if (!copyTargetSelector)
        {
          return
        }

        copyTooltip.copyTarget = document.querySelector(copyTargetSelector)
        if (!copyTooltip.copyTarget)
        {
          return
        }

        const tooltipTargetSelector = _button.dataset.tooltipTarget
        // console.log(_button)
        // console.log(tooltipTargetSelector)
        if (tooltipTargetSelector)
        {
          copyTooltip.tooltipTarget = document.querySelector(tooltipTargetSelector)
        }
        // console.log(copyTooltip.tooltipTarget)
        if (!copyTooltip.tooltipTarget)
        {
          copyTooltip.tooltipTarget = copyTooltip.button
        }
        // console.log(copyTooltip.tooltipTarget)

        copyTooltip.tooltip = bootstrap.Tooltip.getInstance(copyTooltip.tooltipTarget)
        console.log(copyTooltip.tooltip)
        if (!copyTooltip.tooltip)
        {
          copyTooltip.tooltip = new bootstrap.Tooltip(copyTooltip.tooltipTarget,
          {
            title: "Copied",
            trigger: "manual",
            html: true,
          })
          console.log(copyTooltip.tooltip)

          // copyTooltip.tooltipTarget.addEventListener("show.bs.tooltip", () =>
          // {
          //   console.log("Start Showing Tooltip")
          //   console.log(copyTooltip)
          //   copyTooltip.isTooltipShown = true
          // })

          // copyTooltip.tooltipTarget.addEventListener("hide.bs.tooltip", () =>
          // {
          //   console.log("Start Hiding Tooltip")
          //   console.log(copyTooltip)
          //   copyTooltip.isTooltipShown = false
          // })

          // copyTooltip.tooltipTarget.addEventListener("shown.bs.tooltip", () =>
          // {
          //   console.log("Tooltip Shown")
          // })

          // copyTooltip.tooltipTarget.addEventListener("hidden.bs.tooltip", () =>
          // {
          //   console.log("Tooltip Hidden")
          // })
        }

        copyTooltip.show = async (displayHTML) =>
        {
          if (copyTooltip.tooltip._isShown())
          {
            clearTimeout(copyTooltip.tooltip.timer)
            copyTooltip.tooltip.hide()
            await sleep(200)
          }

          copyTooltip.tooltip.setContent(
          {
            ".tooltip-inner": displayHTML,
          })
          // console.log(copyTooltip.tooltip.setContent)
          // console.log("copyTooltip.isTooltipShown:", copyTooltip.isTooltipShown)
          if (!copyTooltip.tooltip._isShown())
          {
            if (!copyTooltip.tooltip.isEnabled)
            {
              copyTooltip.tooltip.enable()
            }
            copyTooltip.tooltip.show()
          }
          // copyTooltip.tooltip.disable()
          copyTooltip.tooltip.timer = setTimeout(() =>
          {
            copyTooltip.tooltip.hide()
          }, 3000)
          console.log(copyTooltip.tooltip)
        }

        const text = copyTooltip.copyTarget.value
        if (!text)
        {
          // display no contents to copy
          copyTooltip.show('<i class="fa-solid fa-clipboard-question"></i> No Contents, Skipped<span class="no-contents"></span>')
          return
        }

        copyTextToClipboard(text).then(result =>
        {
          if (result)
          {
            // display copy success
            copyTooltip.show('<i class="fa-solid fa-clipboard-check"></i> Copied<span class="copied"></span>')
          }
          else
          {
            // display copy error
            copyTooltip.show('<i class="fa-solid fa-circle-exclamation"></i> Error<span class="error"></span>')
          }
        })
      })
    }
  }

  const initializePasteButtons = () =>
  {
    if (!navigator.clipboard)
    {
      return
    }

    // await waitingBootstrap()

    for (const _button of document.querySelectorAll(".paste-button"))
    {
      _button.tabIndex = ""
      _button.ariaDisabled = false
      _button.classList.remove("disabled")

      _button.addEventListener("click", async (event) =>
      {
        event.preventDefault()

        const pasteTooltip =
        {
          button: _button,
        }

        const pasteTargetSelector = _button.dataset.pasteTarget
        if (!pasteTargetSelector)
        {
          return
        }

        pasteTooltip.pasteTarget = document.querySelector(pasteTargetSelector)
        if (!pasteTooltip.pasteTarget)
        {
          return
        }

        const tooltipTargetSelector = _button.dataset.tooltipTarget
        if (tooltipTargetSelector)
        {
          pasteTooltip.tooltipTarget = document.querySelector(tooltipTargetSelector)
        }
        if (!pasteTooltip.tooltipTarget)
        {
          pasteTooltip.tooltipTarget = pasteTooltip.button
        }

        pasteTooltip.tooltip = bootstrap.Tooltip.getInstance(pasteTooltip.tooltipTarget)
        console.log(pasteTooltip.tooltip)
        if (!pasteTooltip.tooltip)
        {
          pasteTooltip.tooltip = new bootstrap.Tooltip(pasteTooltip.tooltipTarget,
          {
            title: "Pasted",
            trigger: "manual",
            html: true,
          })
          console.log(pasteTooltip.tooltip)
        }

        pasteTooltip.show = async (displayHTML) =>
        {
          if (pasteTooltip.tooltip._isShown())
          {
            clearTimeout(pasteTooltip.tooltip.timer)
            pasteTooltip.tooltip.hide()
            await sleep(200)
          }

          pasteTooltip.tooltip.setContent(
          {
            ".tooltip-inner": displayHTML,
          })
          if (!pasteTooltip.tooltip._isShown())
          {
            if (!pasteTooltip.tooltip.isEnabled)
            {
              pasteTooltip.tooltip.enable()
            }
            pasteTooltip.tooltip.show()
          }
          pasteTooltip.tooltip.timer = setTimeout(() =>
          {
            pasteTooltip.tooltip.hide()
          }, 3000)
          console.log(pasteTooltip.tooltip)
        }

        const text = await navigator.clipboard.readText()
        if (!text)
        {
          // display no contents to paste
          pasteTooltip.show('<i class="fa-solid fa-clipboard-question"></i> No Contents, Skipped<span class="no-contents"></span>')
          return
        }

        pasteTooltip.pasteTarget.value = text
        const _event = new Event("change")
        pasteTooltip.pasteTarget.dispatchEvent(_event)

        // display paste success
        pasteTooltip.show('<i class="fa-solid fa-clipboard-check"></i> Pasted<span class="copied"></span>')
      })
    }
  }

  const initializeFunctionButtons = () =>
  {
    __initializeFunctionButtons(
    {
      selector: "#reset-discord-chip-button",
      title: "Resetted",
      clickedTitle: '<i class="fa-solid fa-check"></i> Resetted',
      callback: () =>
      {
        updateDiscordChip()
      },
    })

    __initializeFunctionButtons(
    {
      selector: "#reset-twitter-chip-button",
      title: "Resetted",
      clickedTitle: '<i class="fa-solid fa-check"></i> Resetted',
      callback: () =>
      {
        updateTwitterChip()
      },
    })

    __initializeFunctionButtons(
    {
      selector: "#instancenumber-regenerate-button",
      title: "Regenerated",
      clickedTitle: '<i class="fa-solid fa-rotate"></i> Regenerated',
      callback: () =>
      {
        // regenerate Instance Number once
        regenerateInstaceNumber()
        updateLink()
        updateTextChip()
        updateLauncher()
        setDebugInput()
      },
    })

    __initializeFunctionButtons(
    {
      selector: "#nonce-regenerate-button",
      title: "Regenerated",
      clickedTitle: '<i class="fa-solid fa-rotate"></i> Regenerated',
      callback: () =>
      {
        // regenerate NONCE once
        regenerateNonce()
        updateLink()
        updateTextChip()
        updateLauncher()
        setDebugInput()
      },
    })
  }

  const __initializeFunctionButtons = ({ selector, title, clickedTitle, callback, }) =>
  {
    // await waitingBootstrap()

    for (const _button of document.querySelectorAll(selector))
    {
      _button.addEventListener("click", (event) =>
      {
        event.preventDefault()

        let tooltip = bootstrap.Tooltip.getInstance(_button)
        console.log(tooltip)
        if (!tooltip)
        {
          tooltip = new bootstrap.Tooltip(_button,
          {
            title: title,
            trigger: "manual",
            html: true,
          })
          console.log(tooltip)
        }

        const show = async (displayHTML) =>
        {
          if (tooltip._isShown())
          {
            clearTimeout(tooltip.timer)
            tooltip.hide()
            await sleep(200)
          }

          tooltip.setContent(
          {
            ".tooltip-inner": displayHTML,
          })
          if (!tooltip._isShown())
          {
            if (!tooltip.isEnabled)
            {
              tooltip.enable()
            }
            tooltip.show()
          }
          tooltip.timer = setTimeout(() =>
          {
            tooltip.hide()
          }, 3000)
          console.log(tooltip)
        }

        if (callback)
        {
          callback()
        }

        show(clickedTitle)
      })
    }
  }

  const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms))

  const updateLink = () =>
  {

    const gameLinkWrapper = document.getElementById("gamelink")
    if (gameLinkWrapper)
    {
      const gameLinkElement = document.createElement("a")
      gameLinkElement.href = instance.gameLink
      gameLinkElement.textContent = instance.gameLink

      gameLinkWrapper.innerHTML = ""
      gameLinkWrapper.append(gameLinkElement)
    }

    const gameButton = document.getElementById("game-button")
    if (gameButton)
    {
      gameButton.href = instance.gameLink
      gameButton.tabIndex = ""
      gameButton.ariaDisabled = false
      gameButton.classList.remove("disabled")
    }

    const gameLinkInput = document.getElementById("game-link-input")
    if (gameLinkInput)
    {
      gameLinkInput.value = instance.gameLink
    }

    const webLinkWrapper = document.getElementById("weblink")
    if (webLinkWrapper)
    {
      const webLinkElement = document.createElement("a")
      webLinkElement.href = instance.webURL
      webLinkElement.textContent = instance.webURL

      webLinkWrapper.innerHTML = ""
      webLinkWrapper.append(webLinkElement)
    }

    const webButton = document.getElementById("web-button")
    if (webButton)
    {
      webButton.href = instance.webURL
      webButton.tabIndex = ""
      webButton.ariaDisabled = false
      webButton.classList.remove("disabled")
    }

    const webLinkInput = document.getElementById("web-link-input")
    if (webLinkInput)
    {
      webLinkInput.value = instance.webURL
    }

    const infoLinkWrapper = document.getElementById("infolink")
    if (infoLinkWrapper)
    {
      const infoLinkElement = document.createElement("a")
      infoLinkElement.href = instance.infoURL
      infoLinkElement.textContent = instance.infoURL

      infoLinkWrapper.innerHTML = ""
      infoLinkWrapper.append(infoLinkElement)
    }

    const infoButton = document.getElementById("info-button")
    if (infoButton)
    {
      infoButton.href = instance.infoURL
      infoButton.tabIndex = ""
      infoButton.ariaDisabled = false
      infoButton.classList.remove("disabled")
    }

    const infoLinkInput = document.getElementById("info-link-input")
    if (infoLinkInput)
    {
      infoLinkInput.value = instance.infoURL
    }

    const thisLinkInput = document.getElementById("this-link-input")
    if (thisLinkInput)
    {
      thisLinkInput.value = instance.thisHashURL
    }

    const thisSharableInput = document.getElementById("this-sharable-input")
    if (thisSharableInput)
    {
      thisSharableInput.value = instance.sharableHashURL
    }

    console.log("instance")
    console.log(instance)

    history.pushState(instance.instance, undefined, instance.thisHashURL)
    // history.pushState({ ... instance }, undefined, instance.thisURL)

  }

  const updateWorld = async () =>
  {
    // updateWorldChip()

    await getWorldDataFromAPIByWorldId()

    updateWorldChip()
    updateTextChip()
    updateLauncher()
  }

  const updateLauncher = () =>
  {
    const launchingTitle = document.getElementById("launching-title")
    launchingTitle.append(world.launchingChip)

    document.title = world.launchingTitle
  }

  const getWorldDataFromAPIByWorldId = async () =>
  {
    if (!world.worldId)
    {
      delete world.data
      return
    }

    if (!world.worldId.match(/^wrld_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
    {
      delete world.data
      return
    }

    const data = await getWorldById(world.worldId)
    world.data = data

    console.log("world")
    console.log(world)
  }

  // const launchingTitleNoWorldId = (() =>
  // {
  //   const div = document.createElement("div")
  //   div.append("Buttons")
  //   return div
  // })()
  // const launchingTitleNoWorld = (() =>
  // {
  //   const div = document.createElement("div")
  //   div.append("Buttons")
  //   return div
  // })()
  // const launchingTitle = (() =>
  // {

  // })()
  const backgroundImage = (() =>
  {
    const img = document.createElement("img")
    return img
  })()

  const modalImage = (() =>
  {
    const img = document.createElement("img")
    img.classList.add("img-fluid", "rounded", "shadow-lg")
    return img
  })()

  const updateWorldChip = () =>
  {
    // if (!world.data)
    // {
    //   return
    // }

    const worldChip = document.getElementById("nav-world")
    worldChip.append(world.worldChip)

    // const launchingInfo = document.getElementById("launching-info")
    // launchingInfo.textContent = ""
    // if (!world.data)
    // {
    //   launchingInfo.append("of Launching...")
    // }
    // else
    // {
    //   launchingInfo.append("of Launching ")
    //   const strong2 = document.createElement("strong")
    //   strong2.textContent = instance.instanceReadableType
    //   launchingInfo.append(strong2)
    //   launchingInfo.append(" of ")
    //   const strong = document.createElement("strong")
    //   strong.textContent = world.title
    //   launchingInfo.append(strong)
    //   launchingInfo.append(" / ")
    //   const small = document.createElement("small")
    //   small.textContent = world.authorName
    //   launchingInfo.append(small)
    // }

    if (!world.imageUrl)
    {
      // bg.style.backgroundImage = "none"
      backgroundImage.remove()
      modalImage.remove()
    }
    else
    {
      // bg.style.backgroundImage = "url(" + world.imageUrl + ")"
      backgroundImage.src = world.imageUrl
      backgroundImage.alt = "Main Image of " + world.title
      backgroundImage.decoding = "async"
      backgroundImage.fetchPriority = "low"
      backgroundImage.width = 800
      backgroundImage.height = 600
      backgroundImage.loading = "lazy"
      backgroundImage.referrerPolicy = "no-referrer"

      modalImage.src = world.imageUrl
      modalImage.alt = "Main Image of " + world.title
      modalImage.decoding = "async"
      modalImage.fetchPriority = "low"
      modalImage.width = 800
      modalImage.height = 600
      modalImage.loading = "lazy"
      modalImage.referrerPolicy = "no-referrer"

      const bg = document.getElementById("background-image")
      if (bg)
      {
        bg.append(backgroundImage)
      }

      const modal = document.getElementById("lightbox-modal-contents")
      if (modal)
      {
        modal.append(modalImage)
      }

      const modalLabel = document.getElementById("lightbox-modal-label")
      if (modalLabel)
      {
        modalLabel.textContent = world.title
      }
    }
  }

  const updateTextChip = () =>
  {
    updateDiscordChip()
    updateTwitterChip()
  }

  const updateDiscordChip = () =>
  {
    const textChip = document.getElementById("discord-chip-textarea")

    if (!world.data)
    {
      textChip.value = ""
      return
    }

    // const thisURL = new URL(instance.thisURL)
    // thisURL.searchParams.delete("x")
    // thisURL.searchParams.delete("n")
    // if (instance.instanceType === "public")
    // {
    //   thisURL.searchParams.delete("i")
    // }

    if (instance.removeTraces)
    {
      textChip.value =
        "### " + world.title + "\n" +
        "[Launch **" + instance.instanceReadableType + "**](<" + instance.webURL + ">) " + instance.readableRegionDiscord + " --- " +
        "[Launch **Public**](<" + instance.webPublicURL + ">) " + instance.readableRegionDiscord + " --- " +
        ":globe_with_meridians: [*Info*](" + instance.infoURL + ")" + "\n" +
        ">>> "
    }
    else
    {
      const sharableHashURL = new URL(instance.sharableHashURL)
      sharableHashURL.searchParams.set("a", "true") // Auto Redirect

      textChip.value =
        // "### [" + world.title + "](<" + instance.infoURL + ">)" + "\n" +
        "### " + world.title + "\n" +
        // world.description + "\n" +
        "[Launch **" + instance.instanceReadableType + "**](<" + sharableHashURL + ">) " + instance.readableRegionDiscord + " --- " +
        ":information_source: [*Details*](<" + instance.sharableHashURL + ">)" + " --- " +
        ":globe_with_meridians: [*Info*](" + instance.infoURL + ")" + "\n" +
        ">>> "
    }
    textChip.dataset.modified = "false"
    textChip.selectionStart = 0
    textChip.selectionEnd = textChip.value.length

  }

  const updateTwitterChip = () =>
  {
    const textChip = document.getElementById("twitter-chip-textarea")

    if (!world.data)
    {
      textChip.value = ""
      return
    }

    console.log(world.hashtags)

    textChip.value =
      "ð " + world.title + "\n" +
      "ð¤ " + world.authorName + "\n" +
      (
        world.isRecentlyPublicated ? "ð " + datetimeFormatter.format(world.publicationDate) + "\n" :
        world.isRecentlyLabsPublicated ? "ð " + datetimeFormatter.format(world.labsPublicationDate) + "\n" :
        world.isRecentlyCreated ? "ð " + datetimeFormatter.format(world.created_at) + "\n" :
        world.isRecentlyUpdated ? "ð " + datetimeFormatter.format(world.updated_at) + "\n" :
        ""
      ) +
      "ð " + instance.infoURL +
      (
        world.hashtags.length > 0 ?
        "\n" + world.hashtags.map(hashtag => "#" + hashtag).join(" ")
        : ""
      )
    textChip.dataset.modified = "false"
    textChip.selectionStart = 0
    textChip.selectionEnd = textChip.value.length
  }

  // Generate a Random enough instance ID
  const randomWholeNum = () => Math.floor(Math.random() * 6969)
  const randomInstanceNumber = (type) =>
  {
      const length = 5

      let result = ""
      const characters = type === "number-only" ? "0123456789" : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
      let counter = 0
      for (let i = 0; i < length; i++)
      {
          result += characters.charAt(Math.floor(Math.random() * characters.length))
      }
      return result
  }

  //Generate random enough nonce
  const generateNonce = () =>
  {

      const temp_url = URL.createObjectURL(new Blob())
      const uuid = temp_url.toString()
      URL.revokeObjectURL(temp_url)
      return uuid.split(/[:\/]/g).pop().toLowerCase() // remove prefixes

  }

  const parsingInstanceId = instanceId =>
  {
    if (!instanceId)
    {
      return {}
    }

    let matches
    const instanceData = instanceId.split("~")

    const _parsedData = []
    let _parsedId = 0
    let _dataId = 0
    while (_dataId < instanceData.length)
    {
      switch (_parsedId)
      {
      case 0:
        _parsedData[_parsedId] = instanceData[_dataId]
        _dataId++
        break;
      case 1:
        if (matches = instanceData[_dataId].match(/^(private|public|hidden|friends|group)\((.+?)\)/))
        {
          _parsedData[_parsedId] =
          {
            type: matches[1],
            owner: matches[2],
          }
          _dataId++
        }
        else
        {
          _parsedData[_parsedId] = { type: "public" }
        }
        break;
      case 2:
        if (instanceData[_dataId] === "canRequestInvite")
        {
          _parsedData[_parsedId] = true
          _dataId++
        }
        break;
      case 3:
        if (matches = instanceData[_dataId].match(/^groupAccessType\((public|plus|members)\)/))
        {
          _parsedData[_parsedId] = matches[1]
          _dataId++
        }
        break;
      case 4:
        if (matches = instanceData[_dataId].match(/^region\((.+?)\)/))
        {
          _parsedData[_parsedId] = matches[1]
          _dataId++
        }
        break;
      case 5:
        if (matches = instanceData[_dataId].match(/^nonce\((.+?)\)/))
        {
          _parsedData[_parsedId] = matches[1]
          _dataId++
        }
        break;
      }

      // instanceData[_dataId]

      _parsedId++
    }

    const data = {}
    data.instanceNumber = _parsedData[0]
    data.instanceType =
      _parsedData[1].type === "hidden" ? "friend+" :
      _parsedData[1].type === "friends" ? "friend" :
      _parsedData[1].type === "private" && _parsedData[2] ? "invite+" :
      _parsedData[1].type === "private" ? "invite" :
      _parsedData[1].type === "group" && _parsedData[3] === "public" ? "group-public" :
      _parsedData[1].type === "group" && _parsedData[3] === "plus" ? "group-plus" :
      _parsedData[1].type === "group" ? "group" :
      "public"
    if (_parsedData[1].owner)
    {
      data.instanceOwner = _parsedData[1].owner
    }
    if (_parsedData[4])
    {
      data.region = _parsedData[4]
    }
    if (_parsedData[5])
    {
      data.nonce  = _parsedData[5]
    }

    return data
  }
  const getDataFromUrl = url =>
  {
    if (!url.match(/^https?:\/\//))
    {
      if (url.match(/^wrld_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}(\/info)?$/))
      {
        const worldId = url.replace(/\/info$/, "")
        return { worldId, }
      }

      const _matches = url.match(/(?<=\b|_)wrld_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}(?=\b|_)/)
      if (_matches[0])
      {
        return { worldId: _matches[0], }
      }
    }

    const _url = new URL(url)

    if (_url.protocol === "vrchat:" && _url.pathname === "//launch")
    {
      const id = _url.searchParams.get("id")
      const [ worldId, instanceId, ..._unused ] = id.split(":")
      return {
        worldId,
        ...parsingInstanceId(instanceId),
      }
    }

    if (_url.hostname === "vrchat.com" || _url.hostname === "www.vrchat.com")
    {
      let matches
      if (matches = _url.pathname.match(/^\/home\/world\/(wrld_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12})/))
      {
        const worldId = matches[1]
        return { worldId, }
      }

      if (matches = _url.pathname.match(/^\/home\/content\/worlds\/(wrld_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12})/))
      {
        const worldId = matches[1]
        return { worldId, }
      }

      if (_url.pathname.match(/^\/home\/launch/))
      {
        const worldId = _url.searchParams.get("worldId")
        const instanceId = _url.searchParams.get("instanceId")
        return {
          worldId,
          ...parsingInstanceId(instanceId)
        }
      }
    }

    const _current = new URL(location)
    if (_current.origin + _current.pathname === _url.origin + _url.pathname || _url.hostname === "pokemonleo.github.io")
    {
      const data = {}

      if (_url.pathname.match(/^\/vrchat-launcher\.html/))
      {
        if (_url.hash)
        {
          const hash = _url.hash.replace(/^#/, "")
          const [ __worldId, __instanceId, ..._unused ] = hash.split(":")
          if (__worldId.match(/^wrld_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
          {
            data.worldId = __worldId
          }

          const parsed = parsingInstanceId(__instanceId)

          if (parsed.instanceNumber && !data.instanceNumber)
          {
            data.instanceNumber = parsed.instanceNumber
          }
          if (parsed.instanceType && !data.instanceType)
          {
            data.instanceType = parsed.instanceType
          }
          if (parsed.instanceOwner && !data.instanceOwner)
          {
            data.instanceOwner = parsed.instanceOwner
          }
          if (parsed.region && !data.region)
          {
            data.region = parsed.region
          }
          if (parsed.nonce && !data.nonce)
          {
            data.nonce = parsed.nonce
          }
        }

        const __w = _url.searchParams.get("w")
        if (__w && !data.worldId)
        {
          data.worldId = __w
        }
        const __n = _url.searchParams.get("n")
        if (__n)
        {
          data.instanceNumber = __n
        }
        const __t = _url.searchParams.get("t")
        if (__t)
        {
          data.instanceType = __t
        }
        const __i = _url.searchParams.get("i")
        if (__i)
        {
          data.instanceOwner = __i
        }
        const __r = _url.searchParams.get("r")
        if (__r)
        {
          data.region = __r
        }
        const __x = _url.searchParams.get("x")
        if (__x)
        {
          data.nonce = __x
        }

        return data
      }
    }
  }

  const getWorldById = async (worldId, authCookie) =>
  {
    if (!worldId)
    {
      console.error("No World ID for Fetching")
      return
    }

    if (!worldId.match(/^wrld_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
    {
      console.error("World ID Wrong Format for Fetching")
      return
    }

    console.log("Fetching World By ID: " + worldId)
    return await __getDataById("https://api.vrchat.cloud/api/1/worlds/" + worldId)
  }

  const getUserById = async (userId, authCookie) =>
  {
    if (!userId)
    {
      console.error("No User ID for Fetching")
      return
    }

    if (!userId.match(/^usr_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
    {
      console.error("User ID Wrong Format for Fetching")
      return
    }

    if (!authCookie)
    {
      console.error("No Auth Cookie to Get User")
      return
    }

    console.log("Fetching User By ID: " + userId)
    return await __getDataById("https://api.vrchat.cloud/api/1/users/" + userId)
  }

  const getGroupById = async (groupId, authCookie) =>
  {
    if (!groupId)
    {
      console.error("No Group ID for Fetching")
      return
    }

    if (!groupId.match(/^grp_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/))
    {
      console.error("Group ID Wrong Format for Fetching")
      return
    }

    if (!authCookie)
    {
      console.error("No Auth Cookie to Get Group")
      return
    }

    console.log("Fetching Group By ID: " + groupId)
    return await __getDataById("https://api.vrchat.cloud/api/1/groups/" + groupId)
  }

  const getReadableTypeByInstanceInput = type =>
  {
    if (type === "friend+" || type === "friend-plus" || type === "friends+" || type === "friends-plus")
    {
      return "Friends+"
    }

    if (type === "friend" || type === "friends" || type === "friend-only" || type === "friends-only")
    {
      return "Friends"
    }

    if (type === "invite+" || type === "invite-plus")
    {
      return "Invite+"
    }

    if (type === "invite" || type === "invite-only")
    {
      return "Invite"
    }

    if (type === "group-public")
    {
      return "Group Public"
    }

    if (type === "group+" || type === "group-plus")
    {
      return "Group+"
    }

    if (type === "group" || type === "group-only" || type === "group-member" || type === "group-member-only" || type === "group-members" || type === "group-members-only")
    {
      return "Group"
    }

    return "Public"
  }

  const getNormalizedTypeByInstanceInput = type =>
  {
    if (type === "friend+" || type === "friend-plus" || type === "friends+" || type === "friends-plus")
    {
      return "friend+"
    }

    if (type === "friend" || type === "friends" || type === "friend-only" || type === "friends-only")
    {
      return "friend"
    }

    if (type === "invite+" || type === "invite-plus")
    {
      return "invite+"
    }

    if (type === "invite" || type === "invite-only")
    {
      return "invite"
    }

    if (type === "group-public")
    {
      return "group-public"
    }

    if (type === "group+" || type === "group-plus")
    {
      return "group+"
    }

    if (type === "group" || type === "group-only" || type === "group-member" || type === "group-member-only" || type === "group-members" || type === "group-members-only")
    {
      return "group"
    }

    return "public"
  }

  const getAPITypeByInstanceInput = type =>
  {
    if (type === "friend+" || type === "friend-plus" || type === "friends+" || type === "friends-plus")
    {
      return "hidden"
    }

    if (type === "friend" || type === "friends" || type === "friend-only" || type === "friends-only")
    {
      return "friends"
    }

    if (type === "invite+" || type === "invite-plus")
    {
      return "private"
    }

    if (type === "invite" || type === "invite-only")
    {
      return "private"
    }

    if (type === "group-public")
    {
      return "group"
    }

    if (type === "group+" || type === "group-plus")
    {
      return "group"
    }

    if (type === "group" || type === "group-only" || type === "group-member" || type === "group-member-only" || type === "group-members" || type === "group-members-only")
    {
      return "group"
    }

    return "public"
  }

  const __getDataById = async (url) =>
  {
    // const _u = new URL(location)
    // if (!_u.origin.match(/^https?:\/\//))
    // {
    //   console.warn("Fetching from Non-HTTP/HTTPS Origin is not Allowed on VRChat API")
    //   return
    // }

    // https://github.com/pphosting/cors-proxies-list
    const proxy = new URL("http://www.whateverorigin.org/get")
    proxy.searchParams.set("url", url)

    try
    {
      const response = await fetch(proxy)
      if (!response.ok)
      {
        return
      }

      const data = await response.json()
      return data
    }
    catch (error)
    {
      console.error("Fetching Error")
      console.log("Fetching URL: " + url)
      console.log(error)
    }
  }

  const main = () =>
  {
    console.log("Running main")

    const getParamsFromURL = new URL(location)
    const data = {
      // worldId,
      // instanceNumber,
      // instanceType,
      // instanceOwner,
      // region,
      // nonce,
    }

    const parsingURL = getParamsFromURL.searchParams.get("p")

    if (parsingURL)
    {
      const {
        worldId,
        instanceNumber,
        instanceType,
        instanceOwner,
        region,
        nonce,
      } = getDataFromUrl(parsingURL)

      if (worldId)
      {
        data.worldId = worldId
      }
      if (instanceNumber)
      {
        data.instanceNumber = instanceNumber
      }
      if (instanceType)
      {
        data.instanceType = instanceType
      }
      if (instanceOwner)
      {
        data.instanceOwner = instanceOwner
      }
      if (region)
      {
        data.region = region
      }
      if (nonce)
      {
        data.nonce = nonce
      }
    }

    if (getParamsFromURL.hash)
    {
      const hash = getParamsFromURL.hash.replace(/^#/, "")
      const [ __worldId, __instanceId, ..._unused ] = hash.split(":")
      if (__worldId.match(/^wrld_[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/) && !data.worldId)
      {
        data.worldId = __worldId
      }

      const parsed = parsingInstanceId(__instanceId)

      if (!data.instanceNumber && parsed.instanceNumber)
      {
        data.instanceNumber = parsed.instanceNumber
      }
      if (!data.instanceType && parsed.instanceType)
      {
        data.instanceType = parsed.instanceType
      }
      if (!data.instanceOwner && parsed.instanceOwner)
      {
        data.instanceOwner = parsed.instanceOwner
      }
      if (!data.region && parsed.region)
      {
        data.region = parsed.region
      }
      if (!data.nonce && parsed.nonce)
      {
        data.nonce = parsed.nonce
      }
    }

    if (!data.worldId)
    {
      const __worldId = getParamsFromURL.searchParams.get("w")
      if (__worldId)
      {
        data.worldId = __worldId
      }
    }
    if (!data.instanceNumber)
    {
      const __instanceNumber = getParamsFromURL.searchParams.get("n")
      if (__instanceNumber)
      {
        data.instanceNumber = __instanceNumber
      }
    }
    if (!data.instanceType)
    {
      const __instanceType = getParamsFromURL.searchParams.get("t")
      if (__instanceType)
      {
        data.instanceType = __instanceType
      }
    }
    if (!data.instanceOwner)
    {
      const __instanceOwner = getParamsFromURL.searchParams.get("i")
      if (__instanceOwner)
      {
        data.instanceOwner = __instanceOwner
      }
    }
    if (!data.region)
    {
      const __region = getParamsFromURL.searchParams.get("r")
      if (__region)
      {
        data.region = __region
      }
    }
    if (!data.nonce)
    {
      const __nonce = getParamsFromURL.searchParams.get("x")
      if (__nonce)
      {
        data.nonce = __nonce
      }
    }

    generateWorldLink(data)

    if (instance.worldId)
    {
      world.worldId = instance.worldId
    }

    const isAutomaticallyRedirect = getParamsFromURL.searchParams.get("a")
    if (instance.webURL && !isVoid(isAutomaticallyRedirect))
    {
      setTimeout(() =>
      {
        history.replaceState(instance.instance, undefined, instance.thisURL)
        location.href = instance.webURL
        // location.assign(instance.webURL)
      }, 0)
    }

    document.addEventListener("DOMContentLoaded", () =>
    {
      updateLink()
      setDebugInput()
      setFormInput()
      initializeLinkDetacher()
      initializeForms()
      initializeCopyButtons()
      initializePasteButtons()
      initializeFunctionButtons()
      updateWorld().then(openWorldChipTab)
      replacingVRChatIcons()

      document.body.parentElement.lang = datetimeFormatter.locale
      if (datetimeFormatter.timezone)
      {
        document.body.parentElement.dataset.currentTimeZone = datetimeFormatter.timezone
      }
    })

    addEventListener("popstate", (event) =>
    {
      // console.log("onpopstate")
      // console.log(event)
      // console.log(event.state)

      const oldWorldId = instance.worldId
      instance.instance = event.state

      if (!event.state)
      {
        return
      }

      updateLink()
      setDebugInput()
      setFormInput()
      if (oldWorldId !== instance.worldId)
      {
        updateWorld()
      }
      else
      {
        updateLauncher()
      }
    })

  }

  const initializeLinkDetacher = () =>
  {
    for (const _link of document.querySelectorAll("a"))
    {
      _link.addEventListener("click", event =>
      {
        if (!event)
        {
          return
        }

        if (!event.target)
        {
          return
        }

        if (event.target.href === "#")
        {
          event.preventDefault()
        }
      })
    }
  }

  // const openWorldChipTab = () => new Promise(resolve =>
  // {
  //   if (!world.worldId)
  //   {
  //     resolve()
  //     return
  //   }

  //   if (!world.data)
  //   {
  //     resolve()
  //     return
  //   }

  //   const __openWorldChipTab = () =>
  //   {
  //     const navWorldTab = document.getElementById("nav-world-tab")
  //     if (navWorldTab)
  //     {
  //       const navWorldTrigger = bootstrap.Tab.getInstance(navWorldTab)
  //     console.log(navWorldTrigger)
  //       if (navWorldTrigger)
  //       {
  //         navWorldTrigger.show()
  //         resolve()
  //         return
  //       }
  //     }

  //     setTimeout(__openWorldChipTab, 500)
  //   }

  //   __openWorldChipTab()
  // })

  const openWorldChipTab = () =>
  {
    if (!world.worldId)
    {
      return
    }

    if (!world.data)
    {
      return
    }

    const navWorldTab = document.getElementById("nav-world-tab")
    if (!navWorldTab)
    {
      return
    }

    const navWorldTrigger = new bootstrap.Tab(navWorldTab)
    navWorldTrigger.show()
    navWorldTrigger.dispose()
  }

  const replacingVRChatIcons = () =>
  {
    const icon = FontAwesome.icon(
    {
      prefix: "fab",
      iconName: "vrchat",
      icon:
      [
        596, // width
        596, // height
        "", // ligatures
        "", // unicode
        "M60.2,1.59999c-28,6.1 -49.8,28.2 -55.7,56.5c-2.2,10.6 -2.2,319.2 0,329.8c5.4,25.9 23.6,46.2 49,54.9l8,2.7l148.6,0.3l148.5,0.2l50.9,65.6c29,37.4 53.5,68 57.1,71.4c12.7,11.8 27.1,15.8 39.9,10.9c7.9,-3 15.4,-10 19.1,-18.2l2.9,-6.2l0.3,-61.7l0.3,-61.8l2.7,-0.5c17,-3.5 28.3,-8.9 38.7,-18.7c11.6,-10.8 18.8,-23.5 22,-38.9c2.2,-10.4 2.2,-317.8 0.1,-329.3c-5.5,-28.6 -27.7,-51 -56.7,-57.1c-10.2,-2.2 -465.90001,-2.1 -475.70001,0.1zm468.80001,27.5c17,2.7 31.1,14.9 36.2,31.2c1.7,5.7 1.8,12.3 1.6,166.6l-0.3,160.6l-3.2,6.8c-1.9,3.9 -5.5,9.2 -8.8,12.6c-10.2,10.7 -19.7,14.1 -39.2,14.1l-12.2,0l-0.3,71.7c-0.3,77.3 -0.3,76.6 -5.5,77.9c-3.7,1 -6.7,-0.3 -12,-5c-2.7,-2.5 -29.4,-36 -59.3,-74.5l-54.4,-70.1l-151.1,0c-165,0 -156.7,0.3 -167.7,-5.7c-6.9,-3.7 -15.3,-13 -19.1,-21l-3.2,-6.8l-0.3,-160.5c-0.2,-158.3 -0.2,-160.6 1.8,-167.1c4.6,-15.4 19.3,-28.1 35.4,-30.8c7.7,-1.3 453.60001,-1.3 461.60001,0z M123.1,104.99999c-9.2,3.3 -15.1,9.3 -15.1,15.2c0,3 63.2,209.3 65.4,213.7c4.9,9.4 23.6,13.8 38.8,9.1c9.3,-2.9 13,-6.8 16.2,-17.2c1.4,-4.6 15.8,-52 32.1,-105.3c16.3,-53.4 29.6,-98.5 29.7,-100.3c0,-4.1 -2.2,-7.4 -7.4,-11.2c-9.7,-7.1 -26.4,-8 -31.5,-1.8c-0.7,0.8 -9.4,30.4 -19.3,65.9c-10,35.4 -21.3,75.8 -25.2,89.8c-4.2,14.8 -7.4,24.7 -7.8,24c-0.5,-0.8 -11.9,-40.7 -25.4,-88.8c-13.6,-48 -25.1,-88.2 -25.7,-89.3c-3.1,-5.8 -14.4,-7.5 -24.8,-3.8z M324.4,103.99999c-3.9,1.6 -7.2,6.7 -7.9,12.2c-0.3,2.9 -0.5,52.8 -0.3,110.8c0.3,118.8 -0.4,108.7 8.1,113.2c6.2,3.3 20.2,3.3 27,-0.1c8,-3.9 7.7,-2.1 7.7,-52.1l0,-44.1l14,0.3l14.1,0.3l23.4,45.5c12.8,25 24.6,47 26,48.8c5.4,6.8 13.6,7.8 23.2,2.8c8,-4.1 15.3,-13.3 15.3,-19.2c0,-1 -9.9,-20.2 -22,-42.7c-12.2,-22.5 -21.9,-41.4 -21.8,-41.9c0.2,-0.6 2.4,-1.8 4.9,-2.8c11.1,-4.2 22.7,-14.6 28.6,-25.6c6,-11.3 7.8,-19.9 7.8,-37.9c-0.1,-12.3 -0.5,-17.5 -1.9,-22.5c-7.1,-25.7 -26,-40.5 -57.1,-45c-8.4,-1.2 -86.1,-1.2 -89.1,0zm86.2,38.3c6.8,2.3 13.5,8.3 16.5,14.9c1.8,4.2 2.4,7.6 2.7,15.9c0.7,17.9 -3.7,27.5 -15.3,33.4l-5.9,3l-24.8,0.3l-24.8,0.4l0,-34.5c0,-18.9 0.3,-34.7 0.8,-35.1c0.4,-0.4 10.8,-0.6 23.2,-0.3c17.3,0.3 23.7,0.8 27.6,2z" // svgPathData
      ],
      // transform: { flipH: true },
      // symbol: "vrchat-icon",
    })
    for (const place of document.querySelectorAll(".vrchat-icon"))
    {
      for (const node of icon.node)
      {
        // node.dataset.faTransform = "flip-h"
        // node.dataset.faSymbols = "vrchat-icon"
        place.append(node)
      }
    }
  }

  const fallbackCopyTextToClipboard = text =>
  {
    const textArea = document.createElement("textarea")
    textArea.value = text

    // Avoid scrolling to bottom
    textArea.style.top = "0"
    textArea.style.left = "0"
    textArea.style.position = "fixed"

    document.body.appendChild(textArea)
    textArea.focus()
    textArea.select()

    try
    {
      const successful = document.execCommand('copy')
      const msg = successful ? 'successful' : 'unsuccessful'
      console.log("Fallback: Copying text command was " + msg)
      document.body.removeChild(textArea)
      return true
    }
    catch (err)
    {
      console.error("Fallback: Oops, unable to copy", err)
      document.body.removeChild(textArea)
      return false
    }
  }
  const copyTextToClipboard = async (text) =>
  {
    if (!navigator.clipboard)
    {
      return fallbackCopyTextToClipboard(text)
    }

    try
    {
      await navigator.clipboard.writeText(text)
      console.log("Async: Copying to clipboard was successful!")
      return true
    }
    catch (error)
    {
      console.error("Async: Could not copy text: ", error)
      return false
    }
  }

  const waitingBootstrap = () => new Promise(resolve =>
  {
    const __waitingBootstrap = () =>
    {
      if (window.bootstrap)
      {
        resolve()
        return
      }

      setTimeout(__waitingBootstrap, 2000)
    }

    __waitingBootstrap()
  })

  const isVoid = obj =>
  {
    if (!obj)
    {
      return true
    }

    if (obj === 0)
    {
      return true
    }

    if (obj.trim)
    {
      obj.trim()
    }

    if (obj === "")
    {
      return true
    }

    if (obj === "0")
    {
      return true
    }

    if (obj === "off")
    {
      return true
    }

    if (obj === "false")
    {
      return true
    }

    return false
  }

  const sanitizeVRChatText = text =>
  {
    return text
      .replaceAll("â", "/")
      .replaceAll("Ë¸", ":")
      .replaceAll("â¤", ".")
      .replaceAll("ï¼", "=")
      .replaceAll("âº", "<")
      .replaceAll("â»", ">")
      .replaceAll("ï¼", '"')
      .replaceAll("ï¼", "#")
      .replaceAll("ï¼", "&")
      .replaceAll("ï½", "|")
      // .replaceAll("ï¼", "=")
  }

  // const currentLocale = window.Intl?.DateTimeFormat?.().resolvedOptions?.() ? Intl.DateTimeFormat().resolvedOptions().locale : (navigator.languages && navigator.languages.length) ? navigator.languages[0] : navigator.language
  // const currentTimezone = window.Intl?.DateTimeFormat?.().resolvedOptions?.() ? Intl.DateTimeFormat().resolvedOptions().timeZone : undefined
  const datetimeFormatter =
  {
    // _formatter: new Intl.DateTimeFormat(currentLocale),
    resetFormatter: function()
    {
      // console.log(this.Locale)

      const timeZone = this.timeZone
      this._formatter = new Intl.DateTimeFormat(this.locale,
      {
        timeZone,
        year: this.Locale.year,
        month: this.Locale.month,
        day: this.Locale.day,
        timeZoneName: "shortOffset",
      })
    },

    format: function(...variables)
    {
      if (!this._formatter)
      {
        this.resetFormatter()
      }

      return this._formatter.format(...variables)
    },

    set timeZone(_timeZone)
    {
      if (!this._supportedTimeZones)
      {
        this._supportedTimeZones = Intl.supportedValuesOf("timeZone")
      }

      if (this._supportedTimeZones.indexOf(_timeZone) < 0)
      {
        console.error("Time Zone is not available")
        return
      }

      this._timeZone = _timeZone
      this.defaultTimeZone = _timeZone
      this.resetFormatter()
    },

    get timeZone()
    {
      if (this._timeZone)
      {
        return this._timeZone
      }

      if (this.defaultTimeZone)
      {
        return this.defaultTimeZone
      }

      const resolvedOptions = window.Intl?.DateTimeFormat?.().resolvedOptions?.()
      if (resolvedOptions?.timeZone)
      {
        return resolvedOptions.timeZone
      }

      return
    },

    set defaultTimeZone(_timeZone)
    {
      Cookies.set("defaultTimeZone", _timeZone, { expires: 365, })
    },

    get defaultTimeZone()
    {
      return Cookies.get("defaultTimeZone")
    },

    set locale(_locale)
    {
      try
      {
        const Locale = new Intl.Locale(_locale)
        this._Locale = Locale
        this._locale = Locale.baseName
        this.defaultLocale = Locale.baseName
        this.resetFormatter()
      }
      catch (error)
      {
        console.error("Set Locale Error")
        console.log(error)
      }
    },

    get locale()
    {
      if (this._locale)
      {
        return this._locale
      }

      if (this.defaultLocale)
      {
        return this.defaultLocale
      }

      const resolvedOptions = window.Intl?.DateTimeFormat?.().resolvedOptions?.()
      if (resolvedOptions?.locale)
      {
        return resolvedOptions.locale
      }

      if (navigator.languages && navigator.languages.length)
      {
        navigator.languages[0]
      }

      return navigator.language
    },

    get Locale()
    {
      if (!this._Locale)
      {
        this._Locale = new Intl.Locale(this.locale)
      }

      return this._Locale
    },

    set defaultLocale(_locale)
    {
      Cookies.set("defaultLocale", _locale, { expires: 365, })
    },

    get defaultLocale()
    {
      return Cookies.get("defaultLocale")
    },
  }

  window.setLocale = locale =>
  {
    datetimeFormatter.locale = locale
    document.body.parentElement.lang = datetimeFormatter.locale
  }
  window.setTimeZone = timeZone =>
  {
    datetimeFormatter.timeZone = timeZone
    if (datetimeFormatter.timezone)
    {
      document.body.parentElement.dataset.currentTimeZone = datetimeFormatter.timezone
      updateTwitterChip()
    }
  }

  main()

})()
</script>

<style>

.debug-info
{
  /* margin-top: -12px; */
}

.debug-info-title, .debug-info-text
{
  font-size: .75em;
  color: #6c757d;
}

.debug-info-text
{
  font-family: monospace, monospace;
  text-overflow: ellipsis
}

.world-thumbnail, .world-preview-youtube
{
}

.world-thumbnail > a,
.world-thumbnail > a > img,
.world-preview-youtube > iframe
{
  width: 100%;
  height: 100%;
}

@media (min-width: 576px)
{
  .world-thumbnail
  {
    width: 250px;
    aspect-ratio: 4 / 3;
  }

  .world-preview-youtube
  {
    width: 250px;
    aspect-ratio: 16 / 9;
  }
}

#background-image
{
  background-attachment: fixed;
  background-position: center center;
  background-repeat: no-repeat;
  background-size: cover;
  position: fixed;
  inset: 0;
  z-index: -1;
  opacity: .2;
  pointer-events: none;
  user-select: none;
  filter: blur(6px) contrast(1.5) brightness(1.5);
}

#background-image > img
{
  object-position: center;
  object-fit: cover;
  width: 100%;
  height: 100%;
}

.capacity-tooltip .tooltip-inner
{
  text-align: start;
}

.fis-rounded
{
  border-radius: 50%;
  font-size: 1.5em;
  height: 1em;
  overflow: visible;
  vertical-align: -.25em;
  margin-block: -.25em;
  margin-inline-end: .125em;
  border: 2px solid;
}

</style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" referrerpolicy="no-referrer">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/svg-with-js.min.css" integrity="sha512-vtbctC7BecZMHWPWej78RfcB9RmGpIx+G4+1IT2/Z9P7SIXApaI1XLOCrzpSKgNyTiw1VCmg/EkJXGo+LJYcpw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icons/7.3.2/css/flag-icons.min.css" integrity="sha512-+WVTaUIzUw5LFzqIqXOT3JVAc5SrMuvHm230I9QAZa6s+QRk8NDPswbHo2miIZj3yiFyV9lAgzO1wVrjdoO4tw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/basicLightbox/5.0.0/basicLightbox.min.css" integrity="sha512-C+KPK958JmUdU8B9SVr8YpEZtQ1T1XrFX/OLvE/lt336DFWXFHL5Y9/tUewMEU+Uy3dUAS363XXLdBine0WDyQ==" crossorigin="anonymous" referrerpolicy="no-referrer" /> -->
<style>

.tooltip:has(.no-contents)
{
  --bs-tooltip-color: var(--bs-warning-text-emphasis);
  --bs-tooltip-bg: var(--bs-warning);
}

.tooltip:has(.copied)
{
  --bs-tooltip-color: var(--bs-success-text-emphasis);
  --bs-tooltip-bg: var(--bs-success-bg-subtle);
}

.tooltip:has(.error)
{
  --bs-tooltip-color: var(--bs-danger-text-emphasis);
  --bs-tooltip-bg: var(--bs-danger-bg-subtle);
}

.btn-primary
{
  --bs-btn-hover-bg: #0648c5;
  --bs-btn-hover-border-color: #0631b3;
  --bs-btn-active-bg: #0631b3;
  --bs-btn-active-border-color: #0a53be;
}

.btn-outline-primary
{
  /* --bs-btn-hover-bg: #0648c5; */
  /* --bs-btn-hover-border-color: #0631b3; */
  --bs-btn-active-bg: #0631b3;
  --bs-btn-active-border-color: #0a53be;
}

.btn-outline-success
{
  --bs-btn-active-bg: #0e5333;
  --bs-btn-active-border-color: #0e5333;
}

.btn-info
{
  --bs-btn-hover-bg: #298fcd;
  --bs-btn-hover-border-color: #127b72;
  --bs-btn-active-bg: #127b72;
  --bs-btn-active-border-color: #14708d;
}

</style>

</html>
