<!doctype html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <title>SCORESHEET | 7 WONDERS</title>
  <meta name="description" content="Calculate the 7 Wonders score by yourself with a friendly scoresheet.">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="SCORESHEET | 7 WONDERS">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://pokemonleo.github.io/7-wonders-scoresheet.html">
  <meta property="og:description" content="Calculate the 7 Wonders score by yourself with a friendly scoresheet.">
  <meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMjAgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgRnJlZSA2LjUuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZS9mcmVlIChJY29uczogQ0MgQlkgNC4wLCBGb250czogU0lMIE9GTCAxLjEsIENvZGU6IE1JVCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMyBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggaWQ9InNldmVuIiBkPSJNMCA2NEMwIDQ2LjMgMTQuMyAzMiAzMiAzMkgyODhjMTEuNSAwIDIyIDYuMSAyNy43IDE2LjFzNS43IDIyLjItLjEgMzIuMWwtMjI0IDM4NGMtOC45IDE1LjMtMjguNSAyMC40LTQzLjggMTEuNXMtMjAuNC0yOC41LTExLjUtNDMuOEwyMzIuMyA5NkgzMkMxNC4zIDk2IDAgODEuNyAwIDY0eiIvPjx1c2UgZmlsbD0iIzAwMCIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjEyLjUlIiBocmVmPSIjc2V2ZW4iLz4KPHVzZSBmaWxsPSIjMDAwIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMCIgaHJlZj0iI3NldmVuIi8+PC9zdmc+">

  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="pokemonleo.github.io">
  <meta property="twitter:url" content="https://pokemonleo.github.io/7-wonders-scoresheet.html">
  <meta name="twitter:title" content="SCORESHEET | 7 WONDERS">
  <meta name="twitter:description" content="Calculate the 7 Wonders score by yourself with a friendly scoresheet.">
  <meta name="twitter:image" content="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMjAgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgRnJlZSA2LjUuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZS9mcmVlIChJY29uczogQ0MgQlkgNC4wLCBGb250czogU0lMIE9GTCAxLjEsIENvZGU6IE1JVCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMyBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggaWQ9InNldmVuIiBkPSJNMCA2NEMwIDQ2LjMgMTQuMyAzMiAzMiAzMkgyODhjMTEuNSAwIDIyIDYuMSAyNy43IDE2LjFzNS43IDIyLjItLjEgMzIuMWwtMjI0IDM4NGMtOC45IDE1LjMtMjguNSAyMC40LTQzLjggMTEuNXMtMjAuNC0yOC41LTExLjUtNDMuOEwyMzIuMyA5NkgzMkMxNC4zIDk2IDAgODEuNyAwIDY0eiIvPjx1c2UgZmlsbD0iIzAwMCIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjEyLjUlIiBocmVmPSIjc2V2ZW4iLz4KPHVzZSBmaWxsPSIjMDAwIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMCIgaHJlZj0iI3NldmVuIi8+PC9zdmc+">

  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <!-- <link rel="preconnect" href="https://cdnjs.cloudflare.com"> -->
  <!-- <link rel="preconnect" href="https://raw.githubusercontent.com"> -->
  <!-- <link rel="preconnect" href="https://rsms.me/"> -->
  <link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous">
  <!-- <link rel="preload" as="script" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js" crossorigin="anonymous"> -->
  <link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css" crossorigin="anonymous">
  <!-- <link rel="preload" as="style" href="https://rsms.me/inter/inter.css" crossorigin="anonymous"> -->

  <!-- https://www.jsdelivr.com/package/npm/bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <!-- <link rel="stylesheet" href="https://rsms.me/inter/inter.css"> -->

  <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMjAgNTEyIj48IS0tISBGb250IEF3ZXNvbWUgRnJlZSA2LjUuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZS9mcmVlIChJY29uczogQ0MgQlkgNC4wLCBGb250czogU0lMIE9GTCAxLjEsIENvZGU6IE1JVCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMyBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggaWQ9InNldmVuIiBkPSJNMCA2NEMwIDQ2LjMgMTQuMyAzMiAzMiAzMkgyODhjMTEuNSAwIDIyIDYuMSAyNy43IDE2LjFzNS43IDIyLjItLjEgMzIuMWwtMjI0IDM4NGMtOC45IDE1LjMtMjguNSAyMC40LTQzLjggMTEuNXMtMjAuNC0yOC41LTExLjUtNDMuOEwyMzIuMyA5NkgzMkMxNC4zIDk2IDAgODEuNyAwIDY0eiIvPjx1c2UgZmlsbD0iIzAwMCIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjEyLjUlIiBocmVmPSIjc2V2ZW4iLz4KPHVzZSBmaWxsPSIjMDAwIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMCIgaHJlZj0iI3NldmVuIi8+PC9zdmc+" sizes="any">

  <meta name="theme-color" content="#fafafa">

</head>

<body style="padding-top: 48px; padding-bottom: 38px; height: 100vh; height: 100dvh;">

  <section class="">
    <nav class="navbar fixed-top bg-body-tertiary shadow border-bottom align-items-center" style="height: 48px; overflow-y: hidden;">
      <div class="container-fluid flex-nowrap">
        <header class="">
          <h1 class="h3 mb-0">
            <div>
              SCORESHEET
              <span class="visually-hidden"> | </span>
              <span class="text-secondary" style="--bs-text-opacity: .75; font-size: 16px; white-space: nowrap; font-weight: normal;">7 WONDERS</span>
            </div>
            <div class="visually-hidden text-secondary" style="--bs-text-opacity: .75; font-size: 60%;">Calculate the 7 Wonders score by yourself with a friendly scoresheet.</div>
            <!-- <div class="text-secondary" style="--bs-text-opacity: .75; font-size: 60%;">Calculate the 7 Wonders score by yourself with a friendly scoresheet.</div> -->
          </h1>
        </header>
        <div>
          <button class="btn btn-success btn-sm add-player-button" type="button">Add player</button>
        </div>
      </div>
    </nav>
  </section>

  <section class="" style="height: 100%;">
    <div class="d-flex flex-nowrap" style="height: 100%;">
      <div class="scoresheet-title">
        <div class="pname ptitle" title="Player">
          <span class="icon" aria-hidden="true">üë§</span>
          <span class="text">Player name</span>
        </div>
        <div class="wonder ptitle" title="Wonder: Earn the points from wonder.">
          <span class="icon" aria-hidden="true">‚õ∞Ô∏è</span>
          <span class="text">Wonder</span>
        </div>
        <div class="treasure ptitle" title="Treasure: For every 3 coins, earn 1 point.">
          <span class="icon" aria-hidden="true">üí∞</span>
          <span class="text">Treasure</span>
        </div>
        <div class="cities ptitle" title="Dept: For every debt, earn -1 point.">
          <span class="icon" aria-hidden="true"><span style="color: #000;">‚ñ†</span></span>
          <span class="text">Dept</span>
        </div>
        <div class="military ptitle" title="Military Conflicts: Add the Victory and Defeat tokens.">
          <span class="icon" aria-hidden="true">‚öîÔ∏è</span>
          <span class="text">Military Conflicts</span>
        </div>
        <div class="civilian ptitle" title="Civil Buildings: Add the points from Blue cards.">
          <span class="icon" aria-hidden="true">‚ñÆ</span>
          <span class="text">Civil Buildings</span>
        </div>
        <div class="commercial ptitle" title="Commercial Buildings: Add points from Yellow cards. Check reference.">
          <span class="icon" aria-hidden="true">‚óè</span>
          <span class="text">Commercial Buildings</span>
        </div>
        <div class="scientific ptitle" title="Science Buildings: For first symbol of green cards, earn points by the number of symbol squared.">
          <span class="icon" aria-hidden="true">‚ñ≤<sub>Tablet</sub></span>
          <span class="text">Science Buildings: Tablet</span>
        </div>
        <div class="scientific ptitle" title="Science Buildings: For second symbol of green cards, earn points by the number of symbol squared.">
          <span class="icon" aria-hidden="true">‚ñ≤<sub>Compass</sub></span>
          <span class="text">Science Buildings: Compass</span>
        </div>
        <div class="scientific ptitle" title="Science Buildings: For third symbol of green cards, earn points by the number of symbol squared.">
          <span class="icon" aria-hidden="true">‚ñ≤<sub>Gear</sub></span>
          <span class="text">Science Buildings: Gear</span>
        </div>
        <div class="scientific ptitle" title="Science Buildings: For every set of symbols of green cards, earn 7 points.">
          <span class="icon" aria-hidden="true">‚ñ≤<sub>Set Bonus</sub></span>
          <span class="text">Science Buildings: Set Bonus</span>
        </div>
        <div class="guilds ptitle" title="Guilds: Add points from Purple cards. Check reference.">
          <span class="icon" aria-hidden="true">‚òÖ</span>
          <span class="text">Guilds</span>
        </div>
        <div class="cities ptitle" title="Cities expansion: Add points from Black cards. Check reference.">
          <span class="icon" aria-hidden="true">‚≠ò</span>
          <span class="text">Cities expansion</span>
        </div>
        <div class="leaders ptitle" title="Leaders expansion: Add points from White cards. Check reference.">
          <span class="icon" aria-hidden="true">üëë</span>
          <span class="text">Leaders expansion</span>
        </div>
        <div class="armada ptitle" title="Naval Conflicts: Add the Victory and Defeat tokens.">
          <span class="icon" aria-hidden="true">‚öì</span>
          <span class="text">Naval conflicts</span>
        </div>
        <div class="armada ptitle" title="Armada expansion: Add the points from Shipyard.">
          <span class="icon" aria-hidden="true">üåä</span>
          <span class="text">Shipyard</span>
        </div>
        <div class="armada ptitle" title="Armada expansion: Add the points from Islands.">
          <span class="icon" aria-hidden="true">üèùÔ∏è</span>
          <span class="text">Islands exploration</span>
        </div>
        <div class="edifice ptitle" title="Edifice expansion: Add points from Participation Pawns.">
          <span class="icon" aria-hidden="true">üèõÔ∏è</span>
          <span class="text">Edifice expansion</span>
        </div>
        <div class="total ptitle" title="Total">
          <span class="icon" aria-hidden="true">Œ£</span>
          <span class="text">Total</span>
        </div>
      </div>
      <div class="scoresheet-players">
        <div class="d-flex flex-nowrap" id="scoresheet" style="height: 100%;">
        </div>
        <div class="background-add-button">
          <button class="btn btn-success btn-lg add-player-button shadow-lg" type="button" style="width: 100px; height: 100px; border-radius: 50px;">Add<br>player</button>
        </div>
      </div>
    </div>
  </section>

  <section class="fixed-bottom">
    <div class="container border-top" style="height: 38px; overflow-y: hidden;">
      <footer class="py-2" style="background-color: #fff;">
        <div class="d-flex justify-content-center align-items-center">
          <div class="small">
            ¬© 2024 <span class="text-secondary small" style="--bs-text-opacity: .5;">(Applies to Codes Only)</span>
          </div>
        </div>
      </footer>
    </div>
  </section>

  <div class="modal fade" id="material-modal" tabindex="-1" aria-labelledby="material-modal-title" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title fs-5 d-flex align-items-center" id="material-modal-title"></h3>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Èñâ„Åò„Çã"></button>
        </div>
        <div class="modal-body" id="material-modal-body">
          <table class="table table-hover material-table" style="font-size: clamp(.75em, (100vw - 600px) * (14 - 12) / 200 + .75em, .875em);">
            <thead>
              <tr>
                <th scope="col" style="max-width: 48px; padding-left: 0; padding-right: 0; text-align: center;">Âõ≥Èëë</th>
                <th scope="col" style="width: 5.5vw; min-width: 24px; max-width: 48px; padding-left: 0; padding-right: 0; text-align: center;">ÁîªÂÉè</th>
                <th scope="col" style="min-width: 120px; max-width: 24vw; width: 240px;">Á¥†Êùê</th>
                <th scope="col" style="min-width: 14vw;">ÂÇôËÄÉ</th>
              </tr>
            </thead>
            <tbody class="material-body" data-type="material">
            </tbody>
          </table>
        </div>
        <!--
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
        -->
      </div>
    </div>
  </div>

</body>

<!-- https://www.jsdelivr.com/package/npm/bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous" defer></script>

<style>
  html, body
  {
    font-language-override: "ENG";
    -webkit-locale: "en";
    line-break: strict;
    word-break: break-word;
    overflow-wrap: break-word;
    /* word-wrap: break-word; */
  }

  .pname
  {

  }

  .wonder
  {
    color: #475569;
  }

  .treasure
  {
    color: #a16207;
  }

  .military
  {
    color: #9f1239;
    background-color: #fca5a5;
  }

  .civilian
  {
    color: #1e40af;
    background-color: #7dd3fc;
  }

  .commercial
  {
    color: #854d0e;
    background-color: #fcd34d;
  }

  .scientific
  {
    color: #166534;
    background-color: #6ee7b7;
  }

  .guilds
  {
    color: #5b21b6;
    background-color: #c4b5fd;
  }

  .cities
  {
    color: #f4f4f5;
    background-color: #71717a;
  }

  .leaders
  {
    color: #78716c;
  }

  .armada
  {
    color: #06b6d4;
  }

  .edifice
  {

  }

  .total
  {
    font-weight: bold;
    display: grid;
    place-items: center;
    background-color: #fff;

    box-shadow: 0 -0.5rem 1rem rgba(0, 0, 0, 0.15);
  }

  .scoresheet-title .ptitle:not(.total),
  .scoresheet-span .ptitle:not(.total)
  {
    border-bottom: clamp(2px, .25vw, 4px) solid rgb(0 0 0 / 10%);
    border-bottom: 3px solid rgb(0 0 0 / 10%);
  }

  #scoresheet input
  {
    display: block;
    width: 100%;
    height: 100%;
    vertical-align: middle;
    padding: 0;
    font-size: inherit;
    font-weight: inherit;
    color: inherit;
    text-align: center;
    border: none;
    transition: border-color .4s ease-in-out;
    outline: none;
    background-color: transparent;
  }

  #scoresheet input::placeholder
  {
    color: rgb(0 0 0 / 25%);
  }

  #scoresheet input:not(.total-input)
  {
    border-bottom: clamp(2px, .25vw, 4px) solid rgb(0 0 0 / 10%);
    border-bottom: 3px solid rgb(0 0 0 / 10%);
  }

  #scoresheet input:not(.total-input):focus
  {
    border-color: rgb(0 0 0 / 50%);
  }

  .pname-input
  {

  }

  .pname-input::placeholder
  {
    font-size: 16px;
  }

  .wonder-input
  {

  }

  .treasure-input
  {

  }

  .military-input
  {

  }

  .civilian-input
  {

  }

  .commercial-input
  {

  }

  .scientific-input
  {

  }

  .guilds-input
  {

  }

  .cities-input
  {

  }

  .leaders-input
  {

  }

  .armada-input
  {

  }

  .edifice-input
  {

  }

  .total-input
  {
    font-weight: bold;
    white-space: nowrap;
  }

  .tooltip
  {
    pointer-events: none;
  }

  .scoresheet-title
  {
    max-width: 30%;
    width: 200px;
    height: 100%;
  }

  .ptitle
  {
    height: 80px;
    text-align: center;
    display: grid;
    place-items: center;
    padding-inline: 4px;
  }

  .ptitle .icon
  {
    font-size: 1.5em;
    line-height: 1em;
  }

  .ptitle .icon sup, .ptitle .icon sub
  {
    font-size: .5em;
  }

  .ptitle .text
  {
    font-size: .875em;
  }

  .ptitle.total
  {
    height: clamp(100px, 16vh, 120px);
    max-height: 50%;
    position: sticky;
    bottom: 0px;
  }

  .pname
  {
    position: sticky;
    top: 0px;
    background-color: #fff;

    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    z-index: 1;
  }

  .ptitle.total .icon
  {
    font-size: 3em;
    line-height: 1em;
  }

  .ptitle.total .text
  {
    font-size: 1.25em;
  }

  .scoresheet-players
  {
    min-width: 70%;
    width: calc(100% - 200px);
    overflow-x: auto;
    position: relative;
  }

  .background-add-button
  {
    position: absolute;
    top: 0;
    left: calc(var(--player-count, 1) * 150px);
    right: 0;
    bottom: 0;
    display: grid;
    place-items: center;
    overflow: hidden;
  }

  #scoresheet > div
  {
    position: relative;
    z-index: 1;
  }

  .scoresheet-player
  {
    min-width: 150px;
    width: max-content;

    background-color: #fff;
  }

  .scoresheet-player > div
  {
    height: 80px;
    text-align: center;
  }

  .scoresheet-player > .total
  {
    height: clamp(100px, 16vh, 120px);
    max-height: 50%;
    position: sticky;
    bottom: 0px;
    z-index: 2;

    font-size: clamp(24px, 4.5vw, 3.5rem);
    font-size: 3.5rem;

    padding-inline: 16px;
    padding-inline: .5ch;

    width: max-content;
    min-width: 100%;
  }

  .scoresheet-player + .scoresheet-player > .total
  {
    border-left: 1px solid #aaa;
  }

  .scoresheet-title, .scoresheet-player
  {
    overflow-x: hidden;
  }

</style>

<script>
void (() =>
{
  const main = () =>
  {
    const _____start = window.performance.now()

    const divs = document.querySelectorAll(".scoresheet-title")
    for (const element of divs)
    {
      element.addEventListener("scroll", syncScroll)
      addToSyncScroll(element)
    }
    readyAddPlayerButton()
    addPlayer()
    renderPTitleTooltips()

    const _____end = window.performance.now()
    console.log("Rendering Full Page Elapsed:", Math.trunc((_____end - _____start) * 100) / 100, "ms")
  }

  document.addEventListener("DOMContentLoaded", () => void main())

  const readyAddPlayerButton = () =>
  {
    const buttons = document.querySelectorAll(".add-player-button")
    for (const button of buttons)
    {
      button.addEventListener("click", addPlayer)
    }
  }

  const playerCount = { counts: 0 }
  const addPlayer = () =>
  {
    const playername = createLineObject({
      title: "Player name",
      "titleClass": "pname",

      element: "input",
      "class": "pname-input",
      attribute: {
        type: "text",
        placeholder: "Insert player name",
      },
    })

    const wonder = createLineObject({
      title: "Wonder: Earn the points from wonder.",
      "titleClass": "wonder",

      element: "input",
      "class": "wonder-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          wonder.input.select()
        },
        "change input": () =>
        {
          player.counts.wonder = parseFloat(wonder.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const treasure = createLineObject({
      title: "Treasure: For every 3 coins, earn 1 point.",
      "titleClass": "treasure",

      element: "input",
      "class": "treasure-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          treasure.input.select()
        },
        "change input": () =>
        {
          player.counts.treasure = parseFloat(treasure.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const dept = createLineObject({
      title: "Dept: For every debt, earn -1 point.",
      "titleClass": "cities",

      element: "input",
      "class": "cities-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          dept.input.select()
        },
        "change input": () =>
        {
          player.counts.dept = parseFloat(dept.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const military = createLineObject({
      title: "Military Conflicts: Add the Victory and Defeat tokens.",
      "titleClass": "military",

      element: "input",
      "class": "military-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          military.input.select()
        },
        "change input": () =>
        {
          player.counts.military = parseFloat(military.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const civilian = createLineObject({
      title: "Civil Buildings: Add the points from Blue cards.",
      "titleClass": "civilian",

      element: "input",
      "class": "civilian-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          civilian.input.select()
        },
        "change input": () =>
        {
          player.counts.civilian = parseFloat(civilian.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const commercial = createLineObject({
      title: "Commercial Buildings: Add points from Yellow cards. Check reference.",
      "titleClass": "commercial",

      element: "input",
      "class": "commercial-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          commercial.input.select()
        },
        "change input": () =>
        {
          player.counts.commercial = parseFloat(commercial.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const scientific1 = createLineObject({
      title: "Science Buildings: For first symbol of green cards, earn points by the number of symbol squared.",
      "titleClass": "scientific",

      element: "input",
      "class": "scientific-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          scientific1.input.select()
        },
        "change input": () =>
        {
          player.counts.scientific1 = parseFloat(scientific1.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const scientific2 = createLineObject({
      title: "Science Buildings: For second symbol of green cards, earn points by the number of symbol squared.",
      "titleClass": "scientific",

      element: "input",
      "class": "scientific-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          scientific2.input.select()
        },
        "change input": () =>
        {
          player.counts.scientific2 = parseFloat(scientific2.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const scientific3 = createLineObject({
      title: "Science Buildings: For third symbol of green cards, earn points by the number of symbol squared.",
      "titleClass": "scientific",

      element: "input",
      "class": "scientific-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          scientific3.input.select()
        },
        "change input": () =>
        {
          player.counts.scientific3 = parseFloat(scientific3.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const scientific_sb = createLineObject({
      title: "Science Buildings: For every set of symbols of green cards, earn 7 victory points.",
      "titleClass": "scientific",

      element: "input",
      "class": "scientific-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          scientific_sb.input.select()
        },
        "change input": () =>
        {
          player.counts.scientific_sb = parseFloat(scientific_sb.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const guilds = createLineObject({
      title: "Guilds: Add points from Purple cards. Check reference.",
      "titleClass": "guilds",

      element: "input",
      "class": "guilds-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          guilds.input.select()
        },
        "change input": () =>
        {
          player.counts.guilds = parseFloat(guilds.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const cities = createLineObject({
      title: "Cities expansion: Add points from Black cards. Check reference.",
      "titleClass": "cities",

      element: "input",
      "class": "cities-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          cities.input.select()
        },
        "change input": () =>
        {
          player.counts.cities = parseFloat(cities.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const leaders = createLineObject({
      title: "Leaders expansion: Add points from White cards. Check reference.",
      "titleClass": "leaders",

      element: "input",
      "class": "leaders-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          leaders.input.select()
        },
        "change input": () =>
        {
          player.counts.leaders = parseFloat(leaders.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const naval = createLineObject({
      title: "Naval conflicts: Add the Victory and Defeat tokens.",
      "titleClass": "armada",

      element: "input",
      "class": "armada-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          naval.input.select()
        },
        "change input": () =>
        {
          player.counts.naval = parseFloat(naval.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const armada = createLineObject({
      title: "Armada expansion: Add the points from Shipyard.",
      "titleClass": "armada",

      element: "input",
      "class": "armada-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          armada.input.select()
        },
        "change input": () =>
        {
          player.counts.armada = parseFloat(armada.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const island = createLineObject({
      title: "Armada expansion: Add the points from Islands.",
      "titleClass": "armada",

      element: "input",
      "class": "armada-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          island.input.select()
        },
        "change input": () =>
        {
          player.counts.island = parseFloat(island.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const edifice = createLineObject({
      title: "Edifice expansion: Add points from Participation Pawns.",
      "titleClass": "edifice",

      element: "input",
      "class": "edifice-input",
      attribute: {
        type: "number",
        step: "1",
        inputMode: "numeric",
        placeholder: "0",
      },
      eventListeners: {
        "focus": () =>
        {
          edifice.input.select()
        },
        "change input": () =>
        {
          player.counts.edifice = parseFloat(edifice.input.value) || 0
          total.input.innerHTML = calculate()
        },
      },
    })

    const total = createLineObject({
      // title: "Total",
      "titleClass": "total",

      element: "span",
      "class": "total-input",
    })

    const calculate = () =>
    {
      let total = 0
      for (const key in player.counts)
      {
        total += parseFloat(player.counts[key]) || 0
      }

      return total || 0
    }

    const player =
    {
      counts: {},
      lines: [
        playername.line,
        wonder.line,
        treasure.line,
        dept.line,
        military.line,
        civilian.line,
        commercial.line,
        scientific1.line,
        scientific2.line,
        scientific3.line,
        scientific_sb.line,
        guilds.line,
        cities.line,
        leaders.line,
        naval.line,
        armada.line,
        island.line,
        edifice.line,
        total.line,
      ],
    }

    const div = document.createElement("div")
    div.classList.add("scoresheet-player")
    div.append(...player.lines)

    div.addEventListener("scroll", syncScroll)
    addToSyncScroll(div)

    const parent = document.getElementById("scoresheet")
    parent.append(div)

    div.scrollTop = currentScrollTop.scrollTop
    playerCount.counts++

    const players = document.querySelectorAll(".scoresheet-players")
    for (const element of players)
    {
      element.style.setProperty("--player-count", playerCount.counts)
    }

    renderTooltip(playername.line)
    renderTooltip(wonder.line)
    renderTooltip(treasure.line)
    renderTooltip(dept.line)
    renderTooltip(military.line)
    renderTooltip(civilian.line)
    renderTooltip(commercial.line)
    renderTooltip(scientific1.line)
    renderTooltip(scientific2.line)
    renderTooltip(scientific3.line)
    renderTooltip(scientific_sb.line)
    renderTooltip(guilds.line)
    renderTooltip(cities.line)
    renderTooltip(leaders.line)
    renderTooltip(naval.line)
    renderTooltip(armada.line)
    renderTooltip(island.line)
    renderTooltip(edifice.line)
    renderTooltip(total.line)
  }

  const createLine = options =>
  {
    const input = createInput(options)
    const div = createBlock(options)
    div.append(input)

    return div
  }

  const createLineObject = options =>
  {
    const input = createInput(options)
    const div = createBlock(options)
    div.append(input)

    return { line: div, input: input }
  }

  const createTotalObject = options =>
  {
    const text = createText(options)
    const div = createBlock(options)
    div.append(text)

    return { line: div, text: text }
  }

  const createInput = options =>
  {
    if (!options?.element)
    {
      return
    }

    const input = document.createElement(options.element)
    if (options?.class)
    {
      input.classList.add(...options.class.split(/\s/))
    }
    if (options?.attribute)
    {
      for (const key in options.attribute)
      {
        input[key] = options.attribute[key]
      }
    }
    if (options?.eventListeners)
    {
      for (const event in options.eventListeners)
      {
        for (const _event of event.split(/\s/))
        {
          input.addEventListener(_event, options.eventListeners[event])
        }
      }
    }

    return input
  }

  const createBlock = options =>
  {
    const div = document.createElement("div")
    if (options?.titleClass)
    {
      div.classList.add(...options.titleClass.split(/\s/))
    }
    if (options?.title)
    {
      div.title = options.title
    }

    return div
  }

  const renderPTitleTooltips = () =>
  {
    if (!window.bootstrap?.Tooltip)
    {
      return
    }

    const titles = document.getElementsByClassName("ptitle")
    for (const title of Array.from(titles))
    {
      new bootstrap.Tooltip(title)
    }
  }

  const renderTooltip = element =>
  {
    if (!window.bootstrap?.Tooltip)
    {
      return
    }

    new bootstrap.Tooltip(element)
  }

  const allScroller = new Set()
  const currentScrollTop = { scrollTop: 0 }
  const syncScroll = event =>
  {
    syncAllScroll(event.target.scrollTop)
  }

  const addToSyncScroll = element =>
  {
    allScroller.add(element)
  }

  const syncAllScroll = scrollTop =>
  {
    currentScrollTop.scrollTop = scrollTop
    for (const element of allScroller)
    {
      element.scrollTop = scrollTop
    }
  }

})()
</script>

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js" integrity="sha512-GWzVrcGlo0TxTRvz9ttioyYJ+Wwk9Ck0G81D+eO63BaqHaJ3YZX9wuqjwgfcV/MrB2PhaVX9DkYVhbFpStnqpQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->

</html>
